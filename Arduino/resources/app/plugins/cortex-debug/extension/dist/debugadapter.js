module.exports=function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=21)}([function(e,t){e.exports=require("events")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPortName=t.calculatePortMask=t.TelemetryEvent=t.SWOConfigureEvent=t.StoppedEvent=t.AdapterOutputEvent=t.NumberFormat=void 0;const s=r(13);!function(e){e[e.Auto=0]="Auto",e[e.Hexidecimal=1]="Hexidecimal",e[e.Decimal=2]="Decimal",e[e.Binary=3]="Binary"}(t.NumberFormat||(t.NumberFormat={}));class n extends s.Event{constructor(e,t){super("adapter-output",{content:e,type:t})}}t.AdapterOutputEvent=n;class o extends s.Event{constructor(e,t,r){super("stopped",{reason:e,threadId:t,allThreadsStopped:r})}}t.StoppedEvent=o;class i extends s.Event{constructor(e){super("swo-configure",e)}}t.SWOConfigureEvent=i;class a extends s.Event{constructor(e,t,r,s={}){super("record-event",{category:e,action:t,label:r,parameters:s})}}t.TelemetryEvent=a,t.calculatePortMask=function(e){if(!e)return 0;let t=0;return e.forEach(e=>{if("advanced"===e.type)for(const r of e.ports)t=(t|1<<r)>>>0;else t=(t|1<<e.port)>>>0}),t},t.createPortName=function(e,t="gdbPort"){return t+(0===e?"":e.toString())}},function(e,t){e.exports=require("child_process")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMI=t.MINode=void 0;const s=/^[0-7]{3}/;class n{constructor(e,t,r){this.token=e,this.outOfBandRecord=t,this.resultRecords=r}static valueOf(e,t){if(!e)return;const r=/^\.?([a-zA-Z_\-][a-zA-Z0-9_\-]*)/,s=/^\[(\d+)\](?:$|\.)/;if(!(t=t.trim()))return e;let n=e;do{let e=r.exec(t);if(e){if(t=t.substr(e[0].length),!n.length||"string"==typeof n)return;{const t=[];for(const r of n)r[0]===e[1]&&t.push(r[1]);if(t.length>1)n=t;else{if(1!==t.length)return;n=t[0]}}}else if("@"===t[0])n=[n],t=t.substr(1);else{if(e=s.exec(t),!e)return;{t=t.substr(e[0].length);const r=parseInt(e[1]);if(n.length&&"string"!=typeof n&&r>=0&&r<n.length)n=n[r];else if(0!==r)return}}t=t.trim()}while(t);return n}record(e){if(this.outOfBandRecord)return n.valueOf(this.outOfBandRecord[0].output,e)}result(e){if(this.resultRecords)return n.valueOf(this.resultRecords.results,e)}}t.MINode=n;const o=/^(?:(\d*|undefined)([\*\+\=])|([\~\@\&]))/,i=/^(\d*)\^(done|running|connected|error|exit)/,a=/^\r\n?/,u=/^([a-zA-Z_\-][a-zA-Z0-9_\-]*)/,c=/^(.*?),/;t.parseMI=function(e){let t;const r=[];let l;const d={"*":"exec","+":"status","=":"notify"},h={"~":"console","@":"target","&":"log"},p=()=>{if('"'!==e[0])return"";let t,r=1,n=!0,o=e.substr(1),i=!1;for(;n;)i?i=!1:"\\"===o[0]?i=!0:'"'===o[0]&&(n=!1),o=o.substr(1),r++;try{t=function(e){const t=Buffer.alloc(4*e.length);let r=0;if('"'!==e[0]||'"'!==e[e.length-1])throw new Error("Not a valid string");e=e.slice(1,-1);let n=!1;for(let o=0;o<e.length;o++)if(n){let i;"\\"===e[o]?r+=t.write("\\",r):'"'===e[o]?r+=t.write('"',r):"'"===e[o]?r+=t.write("'",r):"n"===e[o]?r+=t.write("\n",r):"r"===e[o]?r+=t.write("\r",r):"t"===e[o]?r+=t.write("\t",r):"b"===e[o]?r+=t.write("\b",r):"f"===e[o]?r+=t.write("\f",r):"v"===e[o]?r+=t.write("\v",r):"0"===e[o]?r+=t.write("\0",r):(i=s.exec(e.substr(o)))?(t.writeUInt8(parseInt(i[0],8),r++),o+=2):r+=t.write(e[o],r),n=!1}else if("\\"===e[o])n=!0;else{if('"'===e[o])throw new Error("Not a valid string");r+=t.write(e[o],r)}return t.slice(0,r).toString("utf8")}(e.substr(0,r))}catch(s){t=e.substr(0,r)}return e=e.substr(r),t};let f,m,g,b,v;for(f=()=>'"'===e[0]?p():"{"===e[0]||"["===e[0]?(()=>{if("{"!==e[0]&&"["!==e[0])return;const t="["===e[0];if("}"===(e=e.substr(1))[0]||"]"===e[0])return e=e.substr(1),[];if(t){let t=f();if(t){const r=[];r.push(t);for(;void 0!==(t=g());)r.push(t);return e=e.substr(1),r}}let r=b();if(r){const t=[];for(t.push(r);r=m();)t.push(r);return e=e.substr(1),t}e=(t?"[":"{")+e})():void 0,b=()=>{const t=u.exec(e);if(!t)return;e=e.substr(t[0].length+1);return[t[1],f()]},g=()=>{if(","===e[0])return e=e.substr(1),f()},m=()=>{if(","===e[0])return e=e.substr(1),b()};v=o.exec(e);){if(e=e.substr(v[0].length),v[1]&&void 0===t&&"undefined"!==v[1]&&(t=parseInt(v[1])),v[2]){const t=c.exec(e);e=e.substr(t[1].length);const s={isStream:!1,type:d[v[2]],asyncClass:t[1],output:[]};let n;for(;n=m();)s.output.push(n);r.push(s)}else if(v[3]){const e={isStream:!0,type:h[v[3]],content:p()};r.push(e)}e=e.replace(a,"")}if(v=i.exec(e)){let r;for(e=e.substr(v[0].length),v[1]&&void 0===t&&(t=parseInt(v[1])),l={resultClass:v[2],results:[]};r=m();)l.results.push(r);e=e.replace(a,"")}return new n(t,r||[],l)}},function(e,t,r){e.exports=r(45)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSession=t.ErrorDestination=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.TerminatedEvent=t.InitializedEvent=t.ContinuedEvent=t.StoppedEvent=t.CompletionItem=t.Module=t.Breakpoint=t.Variable=t.Thread=t.StackFrame=t.Scope=t.Source=void 0;const s=r(22),n=r(9),o=r(23),i=r(24);t.Source=class{constructor(e,t,r=0,s,n){this.name=e,this.path=t,this.sourceReference=r,s&&(this.origin=s),n&&(this.adapterData=n)}};t.Scope=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};t.StackFrame=class{constructor(e,t,r,s=0,n=0){this.id=e,this.source=r,this.line=s,this.column=n,this.name=t}};t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}};t.Variable=class{constructor(e,t,r=0,s,n){this.name=e,this.value=t,this.variablesReference=r,"number"==typeof n&&(this.namedVariables=n),"number"==typeof s&&(this.indexedVariables=s)}};t.Breakpoint=class{constructor(e,t,r,s){this.verified=e;const n=this;"number"==typeof t&&(n.line=t),"number"==typeof r&&(n.column=r),s&&(n.source=s)}};t.Module=class{constructor(e,t){this.id=e,this.name=t}};t.CompletionItem=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};class a extends n.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof r&&(this.body.text=r)}}t.StoppedEvent=a;class u extends n.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=u;class c extends n.Event{constructor(){super("initialized")}}t.InitializedEvent=c;class l extends n.Event{constructor(e){if(super("terminated"),"boolean"==typeof e||e){this.body={restart:e}}}}t.TerminatedEvent=l;class d extends n.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},void 0!==r&&(this.body.data=r)}}t.OutputEvent=d;class h extends n.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=h;class p extends n.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=p;class f extends n.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=f;class m extends n.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=m;class g extends n.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=g;class b extends n.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof r&&(this.body.message=r)}}t.ProgressStartEvent=b;class v extends n.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=v;class y extends n.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressEndEvent=y;class C extends n.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}}var S;t.InvalidatedEvent=C,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(S=t.ErrorDestination||(t.ErrorDestination={}));class E extends s.ProtocolServer{constructor(e,t){super();const r="boolean"==typeof e&&e;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",()=>{this.shutdown()}),this.on("error",e=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){o.runDebugAdapter(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,s,n=S.User){let o;"number"==typeof t?(o={id:t,format:r},s&&(o.variables=s),n&S.User&&(o.showUser=!0),n&S.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=E.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){const t=new n.Response(e);try{if("initialize"===e.command){var r=e.arguments;if("boolean"==typeof r.linesStartAt1&&(this._clientLinesStartAt1=r.linesStartAt1),"boolean"==typeof r.columnsStartAt1&&(this._clientColumnsStartAt1=r.columnsStartAt1),"path"!==r.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,S.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,r)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):"setInstructionBreakpoints"===e.command?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},S.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,s){this.sendErrorResponse(t,1014,"unrecognized request",null,S.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?E.uri2path(e):E.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?E.uri2path(e):E.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new i.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new i.URL(e),r=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(E._formatPIIRegexp,(function(e,s){return t&&s.length>0&&"_"!==s[0]?e:r[s]&&r.hasOwnProperty(s)?r[s]:e}))}}t.DebugSession=E,E._formatPIIRegexp=/{([^}]+)}/g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.Response=t.Message=void 0;class s{constructor(e){this.seq=0,this.type=e}}t.Message=s;t.Response=class extends s{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};t.Event=class extends s{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimLastNewline=t.LogOutputEvent=t.logger=t.Logger=t.LogLevel=void 0;const s=r(26),n=r(8);var o;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(o=t.LogLevel||(t.LogLevel={}));class i{constructor(){this._pendingLogQ=[]}log(e,t=o.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,o.Verbose)}warn(e){this.log(e,o.Warn)}error(e){this.log(e,o.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=o.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){const s="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:s,prependTimestamp:r};this._currentLogger.setup(t).then(()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach(e=>this._write(e.msg,e.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new s.InternalLogger(e,r),this._logFilePathFromInit=t}}t.Logger=i,t.logger=new i;class a extends n.OutputEvent{constructor(e,t){super(e,t===o.Error?"stderr":t===o.Warn?"console":"stdout")}}t.LogOutputEvent=a,t.trimLastNewline=function(e){return e.replace(/(\n|\r\n)$/,"")}},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=t.Response=t.Event=t.ErrorDestination=t.CompletionItem=t.Module=t.Source=t.Breakpoint=t.Variable=t.Scope=t.StackFrame=t.Thread=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ContinuedEvent=t.StoppedEvent=t.TerminatedEvent=t.InitializedEvent=t.logger=t.Logger=t.LoggingDebugSession=t.DebugSession=void 0;const s=r(8);Object.defineProperty(t,"DebugSession",{enumerable:!0,get:function(){return s.DebugSession}}),Object.defineProperty(t,"InitializedEvent",{enumerable:!0,get:function(){return s.InitializedEvent}}),Object.defineProperty(t,"TerminatedEvent",{enumerable:!0,get:function(){return s.TerminatedEvent}}),Object.defineProperty(t,"StoppedEvent",{enumerable:!0,get:function(){return s.StoppedEvent}}),Object.defineProperty(t,"ContinuedEvent",{enumerable:!0,get:function(){return s.ContinuedEvent}}),Object.defineProperty(t,"OutputEvent",{enumerable:!0,get:function(){return s.OutputEvent}}),Object.defineProperty(t,"ThreadEvent",{enumerable:!0,get:function(){return s.ThreadEvent}}),Object.defineProperty(t,"BreakpointEvent",{enumerable:!0,get:function(){return s.BreakpointEvent}}),Object.defineProperty(t,"ModuleEvent",{enumerable:!0,get:function(){return s.ModuleEvent}}),Object.defineProperty(t,"LoadedSourceEvent",{enumerable:!0,get:function(){return s.LoadedSourceEvent}}),Object.defineProperty(t,"CapabilitiesEvent",{enumerable:!0,get:function(){return s.CapabilitiesEvent}}),Object.defineProperty(t,"ProgressStartEvent",{enumerable:!0,get:function(){return s.ProgressStartEvent}}),Object.defineProperty(t,"ProgressUpdateEvent",{enumerable:!0,get:function(){return s.ProgressUpdateEvent}}),Object.defineProperty(t,"ProgressEndEvent",{enumerable:!0,get:function(){return s.ProgressEndEvent}}),Object.defineProperty(t,"InvalidatedEvent",{enumerable:!0,get:function(){return s.InvalidatedEvent}}),Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return s.Thread}}),Object.defineProperty(t,"StackFrame",{enumerable:!0,get:function(){return s.StackFrame}}),Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(t,"Breakpoint",{enumerable:!0,get:function(){return s.Breakpoint}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return s.Source}}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return s.Module}}),Object.defineProperty(t,"CompletionItem",{enumerable:!0,get:function(){return s.CompletionItem}}),Object.defineProperty(t,"ErrorDestination",{enumerable:!0,get:function(){return s.ErrorDestination}});const n=r(25);Object.defineProperty(t,"LoggingDebugSession",{enumerable:!0,get:function(){return n.LoggingDebugSession}});const o=r(11);t.Logger=o;const i=r(9);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return i.Response}});const a=r(28);Object.defineProperty(t,"Handles",{enumerable:!0,get:function(){return a.Handles}});const u=o.logger;t.logger=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIError=t.VariableObject=void 0;const s=r(6);t.VariableObject=class{constructor(e){this.name=s.MINode.valueOf(e,"name"),this.exp=s.MINode.valueOf(e,"exp"),this.numchild=parseInt(s.MINode.valueOf(e,"numchild")),this.type=s.MINode.valueOf(e,"type"),this.value=s.MINode.valueOf(e,"value"),this.threadId=s.MINode.valueOf(e,"thread-id"),this.frozen=!!s.MINode.valueOf(e,"frozen"),this.dynamic=!!s.MINode.valueOf(e,"dynamic"),this.displayhint=s.MINode.valueOf(e,"displayhint"),this.children={},this.hasMore=!!s.MINode.valueOf(e,"has_more")}applyChanges(e){this.value=s.MINode.valueOf(e,"value"),s.MINode.valueOf(e,"type_changed")&&(this.type=s.MINode.valueOf(e,"new_type")),this.dynamic=!!s.MINode.valueOf(e,"dynamic"),this.displayhint=s.MINode.valueOf(e,"displayhint"),this.hasMore=!!s.MINode.valueOf(e,"has_more")}isCompound(){return this.numchild>0||"{...}"===this.value||this.dynamic&&("array"===this.displayhint||"map"===this.displayhint)}toProtocolVariable(){const e={name:this.exp,evaluateName:this.fullExp||this.exp,value:void 0===this.value?"<unknown>":this.value,type:this.type,presentationHint:{kind:this.displayhint},variablesReference:this.id};return this.displayhint,e}},t.MIError=class{constructor(e,t){Object.defineProperty(this,"name",{get:()=>this.constructor.name}),Object.defineProperty(this,"message",{get:()=>e}),Object.defineProperty(this,"source",{get:()=>t}),Error.captureStackTrace(this,this.constructor)}toString(){return`${this.message} (from ${this.source})`}},Object.setPrototypeOf(t.MIError,Object.create(Error.prototype)),t.MIError.prototype.constructor=t.MIError},function(e,t){e.exports=require("timers")},function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PortStatusArgs=t.TcpPortScanner=void 0;const n=r(32),o=r(2),i=r(10),a=r(5),u=r(7);class c{static isPortInUse(e,t){return new Promise((r,s)=>{const n=i.createServer(e=>{});n.once("error",o=>{const i=o.code;i&&"EADDRINUSE"===i||"EACCES"===i?("EACCES"===i&&console.log(`port ${t}:${e} returned code EACCES?`),r(!0)):(console.log(`port ${t}:${e} unexpected error `,o),s(o)),n.close()}),n.listen(e,t,()=>{r(!1),n.close()})})}static isPortInUseEx(e,t){if(c.shouldUseServerMethod(t)){const t=c.getLocalHostAliases();let r=0;return new Promise((s,n)=>{!function e(o,i){c.isPortInUse(o,i).then(n=>{n?s(n):++r===t.length?s(!1):e(o,t[r])}).catch(e=>{n(e)})}(e,t[r])})}return n.check(e,t)}static findFreePorts({min:e,max:t,retrieve:r=1,consecutive:s=!1,doLog:o=!1},i=c.DefaultHost){let a=[];const u=[],l=r,d=c.shouldUseServerMethod(i)?c.isPortInUseEx:n.tcpPortUsed;return new Promise((r,n)=>{l<=0?r(a):function e(i,c){const h=process.hrtime();d(i,c).then(d=>{const p=process.hrtime(h);if(d?u.push(i):(s&&a.length>0&&i!==1+a[a.length-1]&&(o&&console.log("TcpPortHelper.find: Oops, reset for consecutive ports requirement"),a=[]),a.push(i)),o){const e=(p[1]/1e6).toFixed(2),t=`${p[0]}s ${e}ms`;console.log(`TcpPortHelper.find Port ${c}:${i} `+(d?"busy":"free")+`, Found: ${a.length} of ${l} needed ${t}`)}a.length===l?r(a):i<t?e(i+1,c):n(new Error(`Only found ${a.length} of ${l} ports`))}).catch(e=>{n(e)})}(e,i)})}static findFreePortsSync({min:e,max:t,retrieve:r=1,consecutive:o=!1,doLog:i=!1},a=c.DefaultHost,u=null){return s(this,void 0,void 0,(function*(){let s=[];const l=[],d=r;let h=null;if(d<=0)return new Promise(e=>{e(s)});const p=c.shouldUseServerMethod(a)?c.isPortInUseEx:n.tcpPortUsed;for(let r=e;r<=t;r++){if(d<=0)return;const e=process.hrtime();if(yield p(r,a).then(t=>{const n=process.hrtime(e);if(t?l.push(r):(o&&s.length>0&&r!==1+s[s.length-1]&&(i&&console.log("TcpPortHelper.finnd: Oops, reset for consecutive requirement"),s=[]),s.push(r)),i){const e=(n[1]/1e6).toFixed(2),o=`${n[0]}s ${e}ms`;console.log(`TcpPortHelper.find Port ${a}:${r} `+(t?"busy":"free")+`, Found: ${s.length} of ${d} needed `+o)}},e=>{i&&console.error("Error on check:",e.message),h=e}),h||s.length===d)break}return u?(h||s.length!==d||u(s),null):new Promise((e,t)=>{h||s.length!==d?t(h||`Only found ${s.length} of ${d} ports`):e(s)})}))}static getOsNetProbeCmd(){if(""===c.OSNetProbeCmd){const e=u.sync,t=o.platform(),r="win32"===t,s="darwin"===t;r||s||!e("ss")?e("netstat")?(c.OSNetProbeCmd=r?"netstat -nap tcp":"netstat -nap tcp -f inet",c.OSNetProbeCmdRegexpStr="[tT][cC][pP][^\\n]*[:\\.]XYZZY\\s+[^\\s]+\\s+LISTEN[^\\n]*\\n"):s&&e("lsof")?(c.OSNetProbeCmd="lsof -n -iTCP:XYZZY -sTCP:LISTEN",c.OSNetProbeCmdRegexpStr="IPv4[^\\n]+:XYZZY\\s[^\\n]*\\(LISTEN\\)[^\\n]*\\n"):c.OSNetProbeCmd="?":(c.OSNetProbeCmd="ss -nlt",c.OSNetProbeCmdRegexpStr="LISTEN\\s+[^\\n]*:XYZZY\\s+[^\\s]+[^\\n]*\\n")}return c.OSNetProbeCmd}static waitForPortOpenOSUtl(e,t=100,r=5e3,s=!0,n=!0){const o=c.getOsNetProbeCmd().replace("XYZZY",e.toString());if(n&&console.log(o),s&&"?"===o)return c.waitForPortOpen(e,c.DefaultHost,!0,t,r);const i=c.OSNetProbeCmdRegexpStr.replace("XYZZY",e.toString());n&&console.log(i);const u=new RegExp(i),l=Date.now();let d=!0;return t=Math.max(t,1),new Promise((function e(s,i){if("?"===o)return i(new Error("failed"));a.exec(o,(a,c)=>{if(a&&!o.startsWith("lsof"))return i(a);if(u.test(c))return n&&console.log(c.match(u).join("\n")),s();{d&&(d=!1);const o=Date.now()-l;if(!(o<r))return i(new Error("timeout"));n&&console.log(`waitForPortOpenOSUtl: Setting timeout for ${t}ms, curTime = ${o}ms`),setTimeout(()=>{e(s,i)},t)}})}))}static waitForPortStatusEx(e){e.startTimeMs=Date.now();const t=e.checkLocalHostAliases?c.isPortInUseEx:c.isPortInUse;return new Promise((function r(s,n){t(e.port,e.host).then(t=>{if(t===e.desiredStatus)return s();throw new Error("tryagain")}).catch(t=>{if("tryagain"!==t.message)return n(t);if(!(Date.now()-e.startTimeMs<e.timeOutMs))return n(new Error("timeout"));setTimeout(()=>{r(s,n)},e.retryTimeMs)})}))}static waitForPortStatus(e,t=c.DefaultHost,r=!0,s=!0,o=100,i=5e3){if(o=Math.max(o,1),c.shouldUseServerMethod(t)){const n=new l(r,e,t,s,o,i);return c.waitForPortStatusEx(n)}return n.waitForStatus(e,t,r,o,i)}static waitForPortOpen(e,t=c.DefaultHost,r=!0,s=100,o=5e3){if(s=Math.max(s,1),c.shouldUseServerMethod(t)){const n=new l(!0,e,t,r,s,o);return c.waitForPortStatusEx(n)}return n.waitUntilUsedOnHost(e,t,s,o)}static waitForPortClosed(e,t=c.DefaultHost,r=!0,s=100,o=5e3){if(s=Math.max(s,1),c.shouldUseServerMethod(t)){const n=new l(!1,e,t,r,s,o);return c.waitForPortStatusEx(n)}return n.waitUntilFreeOnHost(e,t,s,o)}static getLocalHostAliases(){if(0===c.localHostAliases.length){c.localHostAliases=["0.0.0.0","127.0.0.1",""];const e=o.networkInterfaces();Object.keys(e).forEach(t=>{e[t].forEach(e=>{e.internal&&"ipv4"===e.family.toLowerCase()&&-1===c.localHostAliases.indexOf(e.address)&&c.localHostAliases.push(e.address)})})}return c.localHostAliases}static shouldUseServerMethod(e){return!c.ForceClientMethod&&(!e||"localhost"===e.toLowerCase()||c.getLocalHostAliases().indexOf(e)>=0)}}t.TcpPortScanner=c,c.ForceClientMethod=!1,c.DefaultHost="0.0.0.0",c.OSNetProbeCmd="",c.OSNetProbeCmdRegexpStr="",c.localHostAliases=[];class l{constructor(e,t,r=c.DefaultHost,s=!0,n=100,o=5e3){this.desiredStatus=e,this.port=t,this.host=r,this.checkLocalHostAliases=s,this.retryTimeMs=n,this.timeOutMs=o,this.startTimeMs=0,this.retryTimeMs=Math.max(this.retryTimeMs,1)}}t.PortStatusArgs=l},function(e,t){e.exports=require("util")},function(e,t,r){e.exports=function(e){function t(e){let r,n=null;function o(...e){if(!o.enabled)return;const s=o,n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";a++;const o=t.formatters[n];if("function"==typeof o){const t=e[a];r=o.call(s,t),e.splice(a,1),a--}return r}),t.formatArgs.call(s,e);(s.log||t.log).apply(s,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=s,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===n?t.enabled(e):n,set:e=>{n=e}}),"function"==typeof t.init&&t.init(o),o}function s(e,r){const s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(40),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},function(e,t,r){
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
const s=r(3),n=r(1),o=r(12),i=r(51),a=process.binding("constants"),u=i(),c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,d=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),h=a.EBADF||a.os.errno.EBADF,p=a.ENOENT||a.os.errno.ENOENT,f=[];var m=!1,g=!1;function b(e){var t=[],r=null;try{r=o.randomBytes(e)}catch(t){r=o.pseudoRandomBytes(e)}for(var s=0;s<e;s++)t.push(c[r[s]%c.length]);return t.join("")}function v(e){return void 0===e}function y(e,t){return"function"==typeof e?[t||{},e]:v(e)?[{},t]:[e,t]}function C(e){if(e.name)return n.join(e.dir||u,e.name);if(e.template)return e.template.replace(l,b(6));const t=[e.prefix||"tmp-",process.pid,b(12),e.postfix||""].join("");return n.join(e.dir||u,t)}function S(e,t){var r=y(e,t),n=r[0],o=r[1],i=n.name?1:n.tries||3;return isNaN(i)||i<0?o(new Error("Invalid tries")):n.template&&!n.template.match(l)?o(new Error("Invalid template provided")):void function e(){const t=C(n);s.stat(t,(function(r){if(!r)return i-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}()}function E(e){var t=y(e)[0],r=t.name?1:t.tries||3;if(isNaN(r)||r<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(l))throw new Error("Invalid template provided");do{const e=C(t);try{s.statSync(e)}catch(t){return e}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function x(e){const t=[e];do{for(var r=t.pop(),o=!1,i=s.readdirSync(r),a=0,u=i.length;a<u;a++){var c=n.join(r,i[a]);s.lstatSync(c).isDirectory()?(o||(o=!0,t.push(r)),t.push(c)):s.unlinkSync(c)}o||s.rmdirSync(r)}while(0!==t.length)}function R(e,t,r){const n=O((function(e){try{0<=e[0]&&s.closeSync(e[0])}catch(e){if(!(t=e,I(t,-h,"EBADF")||T(e)))throw e}var t;try{s.unlinkSync(e[1])}catch(e){if(!T(e))throw e}}),[t,e]);return r.keep||f.unshift(n),n}function w(e,t){const r=O(t.unsafeCleanup?x:s.rmdirSync.bind(s),e);return t.keep||f.unshift(r),r}function O(e,t){var r=!1;return function s(n){if(!r){const n=f.indexOf(s);n>=0&&f.splice(n,1),r=!0,e(t)}n&&n(null)}}function P(){if(!g||m)for(;f.length;)try{f[0].call(null)}catch(e){}}function T(e){return I(e,-p,"ENOENT")}function I(e,t,r){return e.code==t||e.code==r}const M=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===M[0]&&(M[1]<9||9===M[1]&&M[2]<5)&&process.addListener("uncaughtException",(function(e){throw g=!0,P(),e})),process.addListener("exit",(function(e){e&&(g=!0),P()})),e.exports.tmpdir=u,e.exports.dir=function(e,t){var r=y(e,t),n=r[0],o=r[1];S(n,(function(e,t){if(e)return o(e);s.mkdir(t,n.mode||448,(function(e){if(e)return o(e);o(null,t,w(t,n))}))}))},e.exports.dirSync=function(e){var t=y(e)[0];const r=E(t);return s.mkdirSync(r,t.mode||448),{name:r,removeCallback:w(r,t)}},e.exports.file=function(e,t){var r=y(e,t),n=r[0],o=r[1];n.postfix=v(n.postfix)?".tmp":n.postfix,S(n,(function(e,t){if(e)return o(e);s.open(t,d,n.mode||384,(function(e,r){return e?o(e):n.discardDescriptor?s.close(r,(function(e){if(e){try{s.unlinkSync(t)}catch(t){T(t)||(e=t)}return o(e)}o(null,t,void 0,R(t,-1,n))})):n.detachDescriptor?o(null,t,r,R(t,-1,n)):void o(null,t,r,R(t,r,n))}))}))},e.exports.fileSync=function(e){var t=y(e)[0];t.postfix=t.postfix||".tmp";const r=t.discardDescriptor||t.detachDescriptor,n=E(t);var o=s.openSync(n,d,t.mode||384);return t.discardDescriptor&&(s.closeSync(o),o=void 0),{name:n,fd:o,removeCallback:R(n,r?-1:o,t)}},e.exports.tmpName=S,e.exports.tmpNameSync=E,e.exports.setGracefulCleanup=function(){m=!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolScope=t.SymbolType=void 0,function(e){e[e.Function=0]="Function",e[e.File=1]="File",e[e.Object=2]="Object",e[e.Normal=3]="Normal"}(t.SymbolType||(t.SymbolType={})),function(e){e[e.Local=0]="Local",e[e.Global=1]="Global",e[e.Neither=2]="Neither",e[e.Both=3]="Both"}(t.SymbolScope||(t.SymbolScope={}))},function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GDBDebugSession=void 0;const n=r(13),o=r(29),i=r(30),a=r(14),u=r(4),c=r(31),l=r(6),d=r(46),h=r(2),p=r(1),f=r(3),m=r(47),g=r(12),b=r(15),v=r(0),y=r(49),C=r(50),S=r(52),E=r(53),x=r(54),R=r(55),w=r(56),O=r(57),P=r(58),T=r(59),I=r(20),M=r(16),F={jlink:y.JLinkServerController,openocd:C.OpenOCDServerController,stutil:S.STUtilServerController,stlink:E.STLinkServerController,pyocd:x.PyOCDServerController,pe:w.PEServerController,bmp:R.BMPServerController,qemu:O.QEMUServerController,external:P.ExternalServerController};class D{constructor(e,t){this.name=e,this.options=t}}const A=e=>e.startsWith("-")?e.substring(1):`interpreter-exec console "${e.replace(/"/g,'\\"')}"`;class L extends n.Event{constructor(e,t){super("custom-stop",{reason:e,threadID:t})}}class k extends n.Event{constructor(e,t=!0){super("custom-continued",{threadID:e,allThreads:t})}}class _ extends n.DebugSession{constructor(e,t=!1,r=1){super(e,t),this.variableHandles=new n.Handles(131072),this.variableHandlesReverse={},this.forceDisassembly=!1,this.activeEditorPath=null,this.currentThreadId=0,this.activeThreadIds=new Set,this.disableSendStoppedEvents=!1,this.stopped=!1,this.stoppedReason="",this.stoppedThreadId=0,this.stoppedEventPending=!1,this.functionBreakpoints=[],this.breakpointMap=new Map,this.fileExistsCache=new Map,this.onConfigDone=new v.EventEmitter,this.timeStart=Date.now(),this.floatingVariableMap={}}initDebugger(){this.miDebugger.on("launcherror",this.launchError.bind(this)),this.miDebugger.on("quit",this.quitEvent.bind(this)),this.miDebugger.on("exited-normally",this.quitEvent.bind(this)),this.miDebugger.on("stopped",this.stopEvent.bind(this)),this.miDebugger.on("msg",this.handleMsg.bind(this)),this.miDebugger.on("breakpoint",this.handleBreakpoint.bind(this)),this.miDebugger.on("step-end",this.handleBreak.bind(this)),this.miDebugger.on("step-out-end",this.handleBreak.bind(this)),this.miDebugger.on("signal-stop",this.handlePause.bind(this)),this.miDebugger.on("running",this.handleRunning.bind(this)),this.miDebugger.on("thread-created",this.handleThreadCreated.bind(this)),this.miDebugger.on("thread-exited",this.handleThreadExited.bind(this)),this.miDebugger.on("thread-selected",this.handleThreadSelected.bind(this)),this.miDebugger.on("thread-group-exited",this.handleThreadGroupExited.bind(this)),this.sendEvent(new n.InitializedEvent)}initializeRequest(e,t){e.body.supportsHitConditionalBreakpoints=!0,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsConditionalBreakpoints=!0,e.body.supportsFunctionBreakpoints=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportsSetVariable=!0,e.body.supportsRestartRequest=!0,this.sendResponse(e)}launchAttachInit(e){this.args=this.normalizeArguments(e),this.args.showDevDebugOutput&&this.handleMsg("log",`Reading symbols from '${e.executable}'\n`),this.symbolTable=new T.SymbolTable(e.toolchainPath,e.toolchainPrefix,e.executable,e.demangle),this.symbolTable.loadSymbols(),this.args.showDevDebugOutput&&this.handleMsg("log","Finished reading symbols\n"),this.breakpointMap=new Map,this.fileExistsCache=new Map}dbgSymbolStuff(e,t,r,s){if("hdm"===h.userInfo().username){this.handleMsg("log",`Reading symbols from ${t}\n`);const n=new T.SymbolTable(e.toolchainPath,e.toolchainPrefix,t,!0);n.loadSymbols();let o=n.getFunctionByName(r,s);console.log(o),o=n.getFunctionByName("memset"),console.log(o),this.handleMsg("log","Finished Reading symbols\n")}}launchRequest(e,t){this.launchAttachInit(t),this.processLaunchAttachRequest(e,!1)}attachRequest(e,t){this.launchAttachInit(t),this.processLaunchAttachRequest(e,!0)}normalizeArguments(e){return e.graphConfig=e.graphConfig||[],e.executable&&!p.isAbsolute(e.executable)&&(e.executable=p.normalize(p.join(e.cwd,e.executable))),e.svdFile&&!p.isAbsolute(e.svdFile)&&(e.svdFile=p.normalize(p.join(e.cwd,e.svdFile))),e.swoConfig&&e.swoConfig.decoders&&(e.swoConfig.decoders=e.swoConfig.decoders.map(t=>("advanced"===t.type&&t.decoder&&!p.isAbsolute(t.decoder)&&(t.decoder=p.normalize(p.join(e.cwd,t.decoder))),t))),e}processLaunchAttachRequest(e,t){if(!f.existsSync(this.args.executable))return void this.sendErrorResponse(e,103,`Unable to find executable file at ${this.args.executable}.`);const r=F[this.args.servertype];this.serverController=new r,this.serverController.setArguments(this.args),this.serverController.on("event",this.serverControllerEvent.bind(this)),this.quit=!1,this.attached=!1,this.started=!1,this.crashed=!1,this.debugReady=!1,this.stopped=!1,this.activeThreadIds.clear();const s={min:5e4,max:52e3,retrieve:this.calculatePortsNeeded(),consecutive:!0};M.TcpPortScanner.findFreePorts(s,c.GDBServer.LOCALHOST).then(r=>{this.createPortsMap(r),this.serverController.setPorts(this.ports);const s=this.serverController.serverExecutable(),n=this.serverController.serverArguments();let i="win32"!==h.platform()?this.args.toolchainPrefix+"-gdb":this.args.toolchainPrefix+"-gdb.exe";if(this.args.toolchainPath&&(i=p.normalize(p.join(this.args.toolchainPath,i))),this.args.gdbPath&&(i=this.args.gdbPath),p.isAbsolute(i)){if(!1===f.existsSync(i))return void this.sendErrorResponse(e,103,`${this.serverController.name} GDB executable "${i}" was not found.\nPlease configure "cortex-debug.armToolchainPath" or "cortex-debug.gdbPath" correctly.`)}else if(!m.sync(i.replace(".exe","")))return void this.sendErrorResponse(e,103,`${this.serverController.name} GDB executable "${i}" was not found.\nPlease configure "cortex-debug.armToolchainPath" or "cortex-debug.gdbPath"  correctly.`);if(s){this.handleMsg("log","Please check OUTPUT tab (Adapter Output) for output from "+s+"\n");const e=`Launching server: "${s}" `+n.map(e=>'"'+e.replace(/"/g,'\\"')+'"').join(" ")+"\n";this.handleMsg("log",e)}let a=this.serverController.initMatch();this.args.overrideGDBServerStartedRegex&&(a=new RegExp(this.args.overrideGDBServerStartedRegex,"i"));const l=this.ports[u.createPortName(this.args.targetProcessor)];this.server=new c.GDBServer(this.args.cwd,s,n,a,l),this.server.on("output",this.handleAdapterOutput.bind(this)),this.server.on("quit",()=>{this.started?this.quitEvent():this.sendErrorResponse(e,103,this.serverController.name+" GDB Server Quit Unexpectedly. See Adapter Output for more details.")}),this.server.on("launcherror",t=>{this.sendErrorResponse(e,103,`Failed to launch ${this.serverController.name} GDB Server: ${t.toString()}`)});let d=b.setTimeout(()=>{this.server.exit(),this.sendEvent(new u.TelemetryEvent("Error","Launching Server",`Failed to launch ${this.serverController.name} GDB Server: Timeout.`)),this.sendErrorResponse(e,103,`Failed to launch ${this.serverController.name} GDB Server: Timeout.`)},c.GDBServer.SERVER_TIMEOUT);this.serverController.serverLaunchStarted(),this.server.init().then(r=>{d&&(clearTimeout(d),d=null),this.serverController.serverLaunchCompleted();let s=["-q","--interpreter=mi2"];s=s.concat(this.args.debuggerArgs||[]),this.miDebugger=new o.MI2(i,s),this.initDebugger(),this.miDebugger.printCalls=!!this.args.showDevDebugOutput,this.miDebugger.debugOutput=!!this.args.showDevDebugOutput;const n=[`interpreter-exec console "source ${this.args.extensionPath}/support/gdbsupport.init"`];if(this.args.demangle&&(n.push('interpreter-exec console "set print demangle on"'),n.push('interpreter-exec console "set print asm-demangle on"')),n.push(...this.serverController.initCommands()),t){n.push(...this.args.preAttachCommands.map(A));const e=null!=this.args.overrideAttachCommands?this.args.overrideAttachCommands.map(A):this.serverController.attachCommands();n.push(...e),n.push(...this.args.postAttachCommands.map(A)),n.push(...this.serverController.swoCommands())}else{n.push(...this.args.preLaunchCommands.map(A));const e=null!=this.args.overrideLaunchCommands?this.args.overrideLaunchCommands.map(A):this.serverController.launchCommands();n.push(...e),n.push(...this.args.postLaunchCommands.map(A)),n.push(...this.serverController.swoCommands())}this.serverController.debuggerLaunchStarted(),this.miDebugger.once("debug-ready",()=>{this.debugReady=!0,this.attached=t});{const e=`Launching GDB: "${i}" `+s.map(e=>'"'+e.replace(/"/g,'\\"')+'"').join(" ")+"\n";this.handleMsg("log",e)}this.disableSendStoppedEvents=!(t||!this.args.runToMain),this.miDebugger.connect(this.args.cwd,this.args.executable,n).then(()=>{this.started=!0,this.serverController.debuggerLaunchCompleted(),this.sendResponse(e);const t=()=>{this.disableSendStoppedEvents=!1,b.setTimeout(()=>{this.stopped=!0,this.stoppedReason="start",this.stoppedThreadId=this.currentThreadId,this.sendEvent(new u.StoppedEvent("start",this.currentThreadId,!0)),this.sendEvent(new L("start",this.currentThreadId))},50)};this.args.runToMain?this.miDebugger.sendCommand("break-insert -t --function main").then(()=>{this.miDebugger.once("generic-stopped",t),this.configDone?this.miDebugger.sendCommand("exec-continue"):this.onConfigDone.once("done",()=>{this.miDebugger.sendCommand("exec-continue")})}):(t(),this.configDone?this.runPostStartSessionCommands(!1):this.onConfigDone.once("done",()=>{this.runPostStartSessionCommands(!1)}))},t=>{this.sendErrorResponse(e,103,"Failed to launch GDB: "+t.toString()),this.sendEvent(new u.TelemetryEvent("Error","Launching GDB",t.toString()))})},t=>{d&&(clearTimeout(d),d=null),this.sendEvent(new u.TelemetryEvent("Error","Launching Server",`Failed to launch ${this.serverController.name} GDB Server: ${t.toString()}`)),this.sendErrorResponse(e,103,`Failed to launch ${this.serverController.name} GDB Server: ${t.toString()}`)})},t=>{this.sendEvent(new u.TelemetryEvent("Error","Launching Server","Failed to find open ports: "+t.toString())),this.sendErrorResponse(e,103,"Failed to find open ports: "+t.toString())})}calculatePortsNeeded(){const e=this.serverController.portsNeeded.length,t=Math.max(this.args.numberOfProcessors||1,1);let r=this.args.targetProcessor||0;(r<0||r>=t)&&(r=r<0?0:t-1,this.handleMsg("log","launch.json: 'targetProcessor' must be >= 0 && < 'numberOfProcessors'. Setting it to "+r+"\n"),r=t-1);const s=e*t;return this.args.numberOfProcessors=t,this.args.targetProcessor=r,s}createPortsMap(e){const t=this.args.numberOfProcessors;this.ports={};let r=0;for(const s of this.serverController.portsNeeded)for(let n=0;n<t;n++){const t=u.createPortName(n,s);this.ports[t]=e[r++]}}runPostStartSessionCommands(e,t=10){let r=e?this.args.postRestartSessionCommands:this.args.postStartSessionCommands;if(r&&r.length>0){let e=this.miDebugger.getCurrentToken();r=r.map(A);const s=setInterval(()=>{const t=this.miDebugger.getCurrentToken();e===t?(clearInterval(s),this.miDebugger.postStart(r)):e=t},t)}}customRequest(e,t,r){if(this.serverController.customRequest(e,t,r))this.sendResponse(t);else switch(e){case"set-force-disassembly":t.body={success:!0},this.forceDisassembly=r.force,this.stopped&&(this.activeEditorPath=null,this.sendEvent(new n.ContinuedEvent(this.currentThreadId,!0)),this.sendEvent(new u.StoppedEvent(this.stoppedReason,this.currentThreadId,!0))),this.sendResponse(t);break;case"load-function-symbols":t.body={functionSymbols:this.symbolTable.getFunctionSymbols()},this.sendResponse(t);break;case"set-active-editor":r.path!==this.activeEditorPath&&(this.activeEditorPath=r.path),t.body={},this.sendResponse(t);break;case"get-arguments":t.body=this.args,this.sendResponse(t);break;case"read-memory":if(!1===this.stopped)return;this.readMemoryRequestCustom(t,r.address,r.length);break;case"write-memory":if(!1===this.stopped)return;this.writeMemoryRequest(t,r.address,r.data);break;case"read-registers":if(!1===this.stopped)return;this.readRegistersRequest(t);break;case"read-register-list":if(!1===this.stopped)return;this.readRegisterListRequest(t);break;case"disassemble":this.disassembleRequest(t,r);break;case"execute-command":let e=r.command;e=e.startsWith("-")?e.substring(1):`interpreter-exec console "${e}"`,this.miDebugger.sendCommand(e).then(e=>{t.body=e.resultRecords,this.sendResponse(t)},e=>{t.body=e,this.sendErrorResponse(t,110,"Unable to execute command")});break;default:t.body={error:"Invalid command."},this.sendResponse(t)}}disassembleRequest(e,t){return s(this,void 0,void 0,(function*(){if(t.function)try{const r=yield this.getDisassemblyForFunction(t.function,t.file);e.body={instructions:r.instructions,name:r.name,file:r.file,address:r.address,length:r.length},this.sendResponse(e)}catch(t){this.sendErrorResponse(e,1,"Unable to disassemble: "+t.toString())}else if(t.startAddress)try{let r=this.symbolTable.getFunctionAtAddress(t.startAddress);if(r)r=yield this.getDisassemblyForFunction(r.name,r.file),e.body={instructions:r.instructions,name:r.name,file:r.file,address:r.address,length:r.length},this.sendResponse(e);else{const r=yield this.getDisassemblyForAddresses(t.startAddress,t.length||256);e.body={instructions:r},this.sendResponse(e)}}catch(t){this.sendErrorResponse(e,1,"Unable to disassemble: "+t.toString())}else this.sendErrorResponse(e,1,"Unable to disassemble; invalid parameters.")}))}getDisassemblyForFunction(e,t){return s(this,void 0,void 0,(function*(){const r=this.symbolTable.getFunctionByName(e,t);if(!r)throw new Error(`Unable to find function with name ${e}.`);if(r.instructions)return r;const s=r.address,n=r.address+r.length,o=(yield this.miDebugger.sendCommand(`data-disassemble -s ${i.hexFormat(s,8)} -e ${i.hexFormat(n,8)} -- 2`)).result("asm_insns").map(e=>({address:l.MINode.valueOf(e,"address"),functionName:l.MINode.valueOf(e,"func-name"),offset:parseInt(l.MINode.valueOf(e,"offset")),instruction:l.MINode.valueOf(e,"inst"),opcodes:l.MINode.valueOf(e,"opcodes")}));return r.instructions=o,r}))}getDisassemblyForAddresses(e,t){return s(this,void 0,void 0,(function*(){const r=e+t;return(yield this.miDebugger.sendCommand(`data-disassemble -s ${i.hexFormat(e,8)} -e ${i.hexFormat(r,8)} -- 2`)).result("asm_insns").map(e=>({address:l.MINode.valueOf(e,"address"),functionName:l.MINode.valueOf(e,"func-name"),offset:parseInt(l.MINode.valueOf(e,"offset")),instruction:l.MINode.valueOf(e,"inst"),opcodes:l.MINode.valueOf(e,"opcodes")}))}))}readMemoryRequestCustom(e,t,r){this.miDebugger.sendCommand(`data-read-memory-bytes "${t}" ${r}`).then(t=>{const r=t.resultRecords.results[0][1][0][0][1],s=t.resultRecords.results[0][1][0][2][1],n=t.resultRecords.results[0][1][0][3][1].match(/[0-9a-f]{2}/g).map(e=>parseInt(e,16));e.body={startAddress:r,endAddress:s,bytes:n},this.sendResponse(e)},s=>{e.body={error:s},this.sendErrorResponse(e,114,"Unable to read memory: "+s.toString()),this.sendEvent(new u.TelemetryEvent("Error","Reading Memory",`${t}-${r.toString(16)}`))})}writeMemoryRequest(e,t,r){const s=i.hexFormat(t,8);this.miDebugger.sendCommand(`data-write-memory-bytes ${s} ${r}`).then(t=>{this.sendResponse(e)},s=>{e.body={error:s},this.sendErrorResponse(e,114,"Unable to write memory: "+s.toString()),this.sendEvent(new u.TelemetryEvent("Error","Writing Memory",`${t.toString(16)}-${r.length.toString(16)}`))})}readRegistersRequest(e){const t=this.args.registerUseNaturalFormat?"N":"x";this.miDebugger.sendCommand("data-list-register-values "+t).then(t=>{if("done"===t.resultRecords.resultClass){const r=t.resultRecords.results[0][1];e.body=r.map(e=>{const t={};return e.forEach(e=>{t[e[0]]=e[1]}),t})}else e.body={error:"Unable to parse response"};this.sendResponse(e)},t=>{e.body={error:t},this.sendErrorResponse(e,115,"Unable to read registers: "+t.toString()),this.sendEvent(new u.TelemetryEvent("Error","Reading Registers",""))})}readRegisterListRequest(e){this.miDebugger.sendCommand("data-list-register-names").then(t=>{if("done"===t.resultRecords.resultClass){let r;t.resultRecords.results.forEach(e=>{"register-names"===e[0]&&(r=e[1])}),e.body=r}else e.body={error:t.resultRecords.results};this.sendResponse(e)},t=>{e.body={error:t},this.sendErrorResponse(e,116,"Unable to read register list: "+t.toString()),this.sendEvent(new u.TelemetryEvent("Error","Reading Register List",""))})}disconnectRequest(e,t){const r=()=>{this.miDebugger.sendCommand("break-delete"),this.attached?(this.attached=!1,this.miDebugger.detach()):this.miDebugger.stop(),this.commandServer&&(this.commandServer.close(),this.commandServer=void 0),b.setTimeout(()=>{try{this.disableSendStoppedEvents=!1,this.server.exit()}catch(e){}finally{this.sendResponse(e)}},50)};this.disableSendStoppedEvents=!0,this.miDebugger&&(this.attached&&!this.stopped?(this.miDebugger.once("generic-stopped",r),this.miDebugger.sendCommand("exec-interrupt")):r())}restartRequest(e,t){const r=()=>s(this,void 0,void 0,(function*(){this.disableSendStoppedEvents=!1;const t=[];t.push(...this.args.preRestartCommands.map(A));const r=null!=this.args.overrideRestartCommands?this.args.overrideRestartCommands.map(A):this.serverController.restartCommands();t.push(...r),t.push(...this.args.postRestartCommands.map(A)),t.push(...this.serverController.swoCommands()),this.miDebugger.restart(t).then(t=>{this.sendResponse(e),b.setTimeout(()=>{this.stopped=!0,this.stoppedReason="restart",this.sendEvent(new n.ContinuedEvent(this.currentThreadId,!0)),this.sendEvent(new u.StoppedEvent("restart",this.currentThreadId,!0)),this.sendEvent(new L("restart",this.currentThreadId)),this.runPostStartSessionCommands(!0,50)},50)},t=>{this.sendErrorResponse(e,6,"Could not restart: "+t)})}));this.disableSendStoppedEvents=!0,this.stopped?r():(this.miDebugger.once("generic-stopped",r),this.miDebugger.sendCommand("exec-interrupt"))}wrapTimeStamp(e){if(this.args.showDevDebugOutput&&this.args.showDevDebugTimestamps){let t=(Date.now()-this.timeStart).toString();for(;t.length<10;)t="0"+t;return t+": "+e}return e}handleAdapterOutput(e){this.sendEvent(new u.AdapterOutputEvent(e,"out"))}serverControllerEvent(e){this.sendEvent(e)}handleMsg(e,t){"target"===e&&(e="stdout"),"log"===e&&(e="stderr"),this.sendEvent(new n.OutputEvent(this.wrapTimeStamp(t),e))}handleRunning(e){this.stopped=!1,this.sendEvent(new n.ContinuedEvent(this.currentThreadId,!0)),this.sendEvent(new k(this.currentThreadId,!0))}findPausedThread(e){if(e.outOfBandRecord&&e.outOfBandRecord[0]&&e.outOfBandRecord[0].output)for(const t of e.outOfBandRecord[0].output)if("thread-id"===t[0])return this.currentThreadId=parseInt(t[1]),void(this.stoppedThreadId=this.currentThreadId)}handleBreakpoint(e){this.stopped=!0,this.stoppedReason="breakpoint",this.findPausedThread(e),this.disableSendStoppedEvents?this.stoppedEventPending=!0:(this.sendEvent(new u.StoppedEvent("breakpoint",this.currentThreadId,!0)),this.sendEvent(new L("breakpoint",this.currentThreadId)))}handleBreak(e){this.stopped=!0,this.stoppedReason="step",this.findPausedThread(e),this.disableSendStoppedEvents?this.stoppedEventPending=!0:(this.sendEvent(new u.StoppedEvent("step",this.currentThreadId,!0)),this.sendEvent(new L("step",this.currentThreadId)))}sendEvent(e){super.sendEvent(e)}handlePause(e){this.stopped=!0,this.stoppedReason="user request",this.findPausedThread(e),this.disableSendStoppedEvents?this.stoppedEventPending=!0:(this.sendEvent(new u.StoppedEvent("user request",this.currentThreadId,!0)),this.sendEvent(new L("user request",this.currentThreadId)))}handleThreadCreated(e){this.activeThreadIds.has(e.threadId)?this.handleMsg("log",`Thread Error: GDB trying to create thread '${e.threadId}' that already exists`):(this.activeThreadIds.add(e.threadId),this.sendEvent(new n.ThreadEvent("started",e.threadId)))}handleThreadExited(e){this.activeThreadIds.has(e.threadId)?this.activeThreadIds.delete(e.threadId):this.handleMsg("log",`Thread Error: GDB trying to delete thread '${e.threadId}' that does not exist.\n`),this.currentThreadId===e.threadId&&(this.currentThreadId=0),this.stoppedThreadId===e.threadId&&(this.stoppedThreadId=0),this.sendEvent(new n.ThreadEvent("exited",e.threadId))}handleThreadSelected(e){this.activeThreadIds.has(e.threadId)?this.currentThreadId=e.threadId:this.handleMsg("log",`Thread Error: GDB trying to select thread '${e.threadId}' that does not exist. No harm done\n`)}handleThreadGroupExited(e){this.currentThreadId=0;for(const e of this.activeThreadIds.values())this.sendEvent(new n.ThreadEvent("exited",e));this.activeThreadIds.clear()}stopEvent(e){this.started||(this.crashed=!0),this.quit||(this.stopped=!0,this.stoppedReason="exception",this.findPausedThread(e),this.sendEvent(new u.StoppedEvent("exception",this.currentThreadId,!0)),this.sendEvent(new L("exception",this.currentThreadId)))}quitEvent(){this.quit=!0,this.sendEvent(new n.TerminatedEvent)}launchError(e){this.handleMsg("stderr","Could not start debugger process, does the program exist in filesystem?\n"),this.handleMsg("stderr",e.toString()+"\n"),this.quitEvent()}static decodeReference(e){return[(65280&e)>>>8,255&e]}static encodeReference(e,t){return 65535&(e<<8|255&t)}setVariableRequest(e,t){return s(this,void 0,void 0,(function*(){try{let r=t.name,s=-1,n=-1;const o=t.variablesReference,i=this.getFloatingVariable(o,r);if(i)r=i.name;else if(o>=131072){const e=this.variableHandles.get(t.variablesReference),s=e.children[r];r=s||`${e.name}.${r}`}else if(o>=256&&o<65535){const e=this.createStackVarName(r,o);this.variableHandlesReverse.hasOwnProperty(e)&&(r=e),[s,n]=_.decodeReference(o)}const a=yield this.miDebugger.varAssign(r,t.value,s,n);e.body={value:a.result("value")},this.sendResponse(e)}catch(t){this.sendErrorResponse(e,11,"Could not set variable: "+t)}}))}setFunctionBreakPointsRequest(e,t){const r=r=>s(this,void 0,void 0,(function*(){this.disableSendStoppedEvents=!1,yield this.miDebugger.removeBreakpoints(this.functionBreakpoints),this.functionBreakpoints=[];const s=[];t.breakpoints.forEach(e=>{s.push(this.miDebugger.addBreakPoint({raw:e.name,condition:e.condition,countCondition:e.hitCondition}))});try{const t=yield Promise.all(s),r=[];t.forEach(e=>{this.functionBreakpoints.push(e.number),e[0]&&r.push({line:e[1].line})}),e.body={breakpoints:r},this.sendResponse(e)}catch(t){this.sendErrorResponse(e,10,t.toString())}r&&(yield this.miDebugger.sendCommand("exec-continue"))})),n=()=>s(this,void 0,void 0,(function*(){this.stopped?yield r(!1):(this.disableSendStoppedEvents=!0,this.miDebugger.once("generic-stopped",()=>{r(!0)}),this.miDebugger.sendCommand("exec-interrupt"))}));this.debugReady?n():this.miDebugger.once("debug-ready",n)}setBreakPointsRequest(e,t){const r=r=>s(this,void 0,void 0,(function*(){this.debugReady=!0;const s=(this.breakpointMap.get(t.source.path)||[]).map(e=>e.number);try{this.disableSendStoppedEvents=!1,yield this.miDebugger.removeBreakpoints(s),this.breakpointMap.set(t.source.path,[]);const r=[],n=decodeURIComponent(t.source.path);if(n.startsWith("disassembly:/")){let e=13;n.startsWith("disassembly:///")&&(e=15);const s=n.substring(e,n.length-6).split(":::");let o,i;2===s.length?(o=s[1],i=s[0]):o=s[0];const a=yield this.getDisassemblyForFunction(o,i);a&&t.breakpoints.forEach(e=>{if(e.line<=a.instructions.length){const s=a.instructions[e.line-1];r.push(this.miDebugger.addBreakPoint({file:t.source.path,line:e.line,condition:e.condition,countCondition:e.hitCondition,raw:s.address}))}})}else t.breakpoints.forEach(e=>{r.push(this.miDebugger.addBreakPoint({file:t.source.path,line:e.line,condition:e.condition,countCondition:e.hitCondition}))});const o=(yield Promise.all(r)).filter(e=>null!==e);e.body={breakpoints:o.map(e=>({line:e.line,id:e.number,verified:!0}))},this.breakpointMap.set(t.source.path,o),this.sendResponse(e)}catch(t){this.sendErrorResponse(e,9,t.toString())}r&&(yield this.miDebugger.sendCommand("exec-continue"))})),n=()=>s(this,void 0,void 0,(function*(){this.stopped?yield r(!1):(this.disableSendStoppedEvents=!0,this.miDebugger.once("generic-stopped",()=>{r(!0)}),this.miDebugger.sendCommand("exec-interrupt"))}));this.debugReady?n():this.miDebugger.once("debug-ready",n)}threadsRequest(e){return s(this,void 0,void 0,(function*(){if(!this.stopped||this.disableSendStoppedEvents)return e.body={threads:[]},this.sendResponse(e),Promise.resolve();try{const t=yield this.miDebugger.sendCommand("thread-list-ids"),r=t.result("thread-ids").map(e=>parseInt(e[1])),s=t.result("current-thread-id");if(!r||0===r.length)return e.body={threads:[]},this.sendResponse(e),Promise.resolve();for(const e of r)this.activeThreadIds.has(e)||this.handleThreadCreated({threadId:e,threadGroupId:"i1"});s?this.currentThreadId=parseInt(s):(this.currentThreadId=r.findIndex(e=>e===this.stoppedThreadId)>=0?this.stoppedThreadId:r[0],r.length>1&&(yield this.miDebugger.sendCommand("thread-select "+this.currentThreadId))),(this.stoppedEventPending||this.currentThreadId!==this.stoppedThreadId)&&(this.stoppedEventPending=!1,this.stoppedThreadId=this.currentThreadId,this.sendEvent(new u.StoppedEvent(this.stoppedReason,this.currentThreadId,!0)),this.sendEvent(new L(this.stoppedReason,this.currentThreadId)));const o=(yield Promise.all(r.map(e=>this.miDebugger.sendCommand("thread-info "+e)))).map(e=>{let t=e.result("threads");if(1===t.length){t=t[0];const e=parseInt(l.MINode.valueOf(t,"id")),r=l.MINode.valueOf(t,"target-id"),s=l.MINode.valueOf(t,"details");let o=l.MINode.valueOf(t,"name");return o&&s&&o!==s?o+=` (${s})`:o=o||s||r,new n.Thread(e,o)}return null}).filter(e=>null!==e);e.body={threads:o},this.sendResponse(e)}catch(t){this.stopped&&this.sendErrorResponse(e,1,"Unable to get thread information: "+t)}}))}stackTraceRequest(e,t){return s(this,void 0,void 0,(function*(){try{const r=yield this.miDebugger.getStackDepth(t.threadId),s=Math.min(r,t.startFrame+t.levels)-1,o=yield this.miDebugger.getStack(t.threadId,t.startFrame,s),i=[];for(const e of o){const r=_.encodeReference(t.threadId,e.level),s=e.file;let o=this.forceDisassembly||!s;if(o||(o=!(yield this.checkFileExists(s))),!o&&this.activeEditorPath&&this.activeEditorPath.startsWith("disassembly:///")){const t=this.symbolTable.getFunctionByName(e.function,e.fileName);let r;t&&(r=t.file&&t.scope!==I.SymbolScope.Global?`disassembly:///${t.file}:::${t.name}.cdasm`:`disassembly:///${t.name}.cdasm`,r===this.activeEditorPath&&(o=!0))}try{if(o){const t=yield this.getDisassemblyForFunction(e.function,e.fileName);let s=-1;if(t.instructions.forEach((t,r)=>{t.address===e.address&&(s=r+1)}),-1!==s){let o;o=t.file&&t.scope!==I.SymbolScope.Global?`${t.file}:::${t.name}.cdasm`:t.name+".cdasm";const a="disassembly:///"+o;i.push(new n.StackFrame(r,`${e.function}@${e.address}`,new n.Source(o,a),s,0))}else i.push(new n.StackFrame(r,e.function+"@"+e.address,null,e.line,0))}else i.push(new n.StackFrame(r,e.function+"@"+e.address,new n.Source(e.fileName,s),e.line,0))}catch(t){i.push(new n.StackFrame(r,e.function+"@"+e.address,null,e.line,0))}}e.body={stackFrames:i,totalFrames:r},this.sendResponse(e)}catch(t){this.stopped&&this.sendErrorResponse(e,12,"Failed to get Stack Trace: "+t.toString())}}))}configurationDoneRequest(e,t){this.sendResponse(e),this.onConfigDone.emit("done"),this.configDone=!0}scopesRequest(e,t){const r=new Array;r.push(new n.Scope("Local",parseInt(t.frameId),!1)),r.push(new n.Scope("Global",254,!1));const s=65536+parseInt(t.frameId);r.push(new n.Scope("Static",s,!1)),this.floatingVariableMap[s]={},e.body={scopes:r},this.sendResponse(e)}globalVariablesRequest(e,t){return s(this,void 0,void 0,(function*(){const r=this.symbolTable.getGlobalVariables(),s=[];try{for(const e of r){const r="global_var_"+e.name;let n;try{const e=yield this.miDebugger.varUpdate(r,-1,-1);e.result("changelist").forEach(e=>{const t=l.MINode.valueOf(e,"name"),r=this.variableHandlesReverse[t];this.variableHandles.get(r).applyChanges(e)});const t=this.variableHandlesReverse[r];n=this.variableHandles.get(t)}catch(t){try{if(!(t instanceof a.MIError&&"Variable object not found"===t.message))throw t;{n=yield this.miDebugger.varCreate(e.name,r);const t=this.findOrCreateVariable(n);n.exp=e.name,n.id=t}}catch(t){this.args.showDevDebugOutput&&(this.handleMsg("stderr",`Could not create global variable ${e.name}\n`),this.handleMsg("stderr",`Error: ${t}\n`)),n=null}}n&&(this.putFloatingVariable(t.variablesReference,e.name,n),s.push(n.toProtocolVariable()))}e.body={variables:s},this.sendResponse(e)}catch(t){this.sendErrorResponse(e,1,"Could not get global variable information: "+t)}}))}createStaticVarName(e,t){return`static_var_${t}_${e}`}putFloatingVariable(e,t,r){const s=this.floatingVariableMap[e]||{};s[t]=r,this.floatingVariableMap[e]=s}getFloatingVariable(e,t){const r=this.floatingVariableMap[e];return r?r[t]:null}staticVariablesRequest(e,t,r,n){return s(this,void 0,void 0,(function*(){const s=[];try{const o=(yield this.miDebugger.getFrame(e,t)).fileName,i=this.symbolTable.getStaticVariables(o),u=g.createHash("sha256");u.update(o);const c=u.digest("hex");for(const e of i){const t=this.createStaticVarName(c,e.name);let r;try{const e=yield this.miDebugger.varUpdate(t,-1,-1);e.result("changelist").forEach(e=>{const t=l.MINode.valueOf(e,"name"),r=this.variableHandlesReverse[t];this.variableHandles.get(r).applyChanges(e)});const s=this.variableHandlesReverse[t];r=this.variableHandles.get(s)}catch(s){try{if(!(s instanceof a.MIError&&"Variable object not found"===s.message))throw s;{r=yield this.miDebugger.varCreate(e.name,t);const s=this.findOrCreateVariable(r);r.exp=e.name,r.id=s}}catch(t){this.args.showDevDebugOutput&&(this.handleMsg("stderr",`Could not create static variable ${o}:${e.name}\n`),this.handleMsg("stderr",`Error: ${t}\n`)),r=null}}r&&(this.putFloatingVariable(n.variablesReference,e.name,r),s.push(r.toProtocolVariable()))}r.body={variables:s},this.sendResponse(r)}catch(e){this.sendErrorResponse(r,1,"Could not get static variable information: "+e)}}))}createVariable(e,t){return t?this.variableHandles.create(new D(e,t)):this.variableHandles.create(e)}findOrCreateVariable(e){let t;return this.variableHandlesReverse.hasOwnProperty(e.name)?t=this.variableHandlesReverse[e.name]:(t=this.createVariable(e),this.variableHandlesReverse[e.name]=t),e.isCompound()?t:0}createStackVarName(e,t){return`var_${e}_${t}`}stackVariablesRequest(e,t){return s(this,void 0,void 0,(function*(){const[r,s]=_.decodeReference(t.variablesReference),n=[];let o;try{o=yield this.miDebugger.getStackVariables(r,s);for(const e of o)try{const o=this.createStackVarName(e.name,t.variablesReference);let i;try{const e=yield this.miDebugger.varUpdate(o,r,s);e.result("changelist").forEach(e=>{const t=l.MINode.valueOf(e,"name"),r=this.variableHandlesReverse[t];this.variableHandles.get(r).applyChanges(e)});const t=this.variableHandlesReverse[o];i=this.variableHandles.get(t)}catch(t){if(!(t instanceof a.MIError&&"Variable object not found"===t.message))throw t;{i=yield this.miDebugger.varCreate(e.name,o,"*");const t=this.findOrCreateVariable(i);i.exp=e.name,i.id=t}}n.push(i.toProtocolVariable())}catch(t){n.push({name:e.name,value:`<${t}>`,variablesReference:0})}e.body={variables:n},this.sendResponse(e)}catch(t){this.sendErrorResponse(e,1,"Could not get stack variables: "+t)}}))}variableMembersRequest(e,t,r){return s(this,void 0,void 0,(function*(){let r;try{r=yield this.miDebugger.evalExpression(JSON.stringify(e),-1,-1);try{let s=d.expandValue(this.createVariable.bind(this),r.result("value"),e,r);s?("string"==typeof s[0]&&(s=[{name:"<value>",value:N(s),variablesReference:0}]),t.body={variables:s},this.sendResponse(t)):this.sendErrorResponse(t,2,"Could not expand variable")}catch(e){this.sendErrorResponse(t,2,"Could not expand variable: "+e)}}catch(e){this.sendErrorResponse(t,1,"Could not expand variable: "+e)}}))}variablesRequest(e,t){return s(this,void 0,void 0,(function*(){let r;if(254===t.variablesReference)return this.globalVariablesRequest(e,t);if(t.variablesReference>=65536&&t.variablesReference<=131071){const[r,s]=_.decodeReference(t.variablesReference);return this.staticVariablesRequest(r,s,e,t)}if(t.variablesReference>=256&&t.variablesReference<65535)return this.stackVariablesRequest(e,t);if(r=this.variableHandles.get(t.variablesReference),"string"==typeof r)return this.variableMembersRequest(r,e,t);if("object"==typeof r)if(r instanceof a.VariableObject){const t=r;let s;const n={};try{s=yield this.miDebugger.varListChildren(r.name,this.args.flattenAnonymous);const o=s.map(e=>{const r=this.findOrCreateVariable(e);if(e.id=r,/^\d+$/.test(e.exp))e.fullExp=`${t.fullExp||t.exp}[${e.exp}]`;else{let r="."+e.exp;if(e.exp.startsWith("<anonymous")){const t=n[e.exp];t&&(n[e.exp]=t+1,e.exp+="#"+t.toString(10)),n[e.exp]=1,r=""}else t.children[e.exp]=e.name;e.fullExp=`${t.fullExp||t.exp}${r}`}return e.toProtocolVariable()});e.body={variables:o},this.sendResponse(e)}catch(t){this.sendErrorResponse(e,1,"Could not expand variable: "+t)}}else if(r instanceof D){const t=r;if(t.options.arg){const r=[];let n=!0,o=0;const i=()=>{e.body={variables:r},this.sendResponse(e)},a=()=>s(this,void 0,void 0,(function*(){const s=yield this.miDebugger.evalExpression(JSON.stringify(`${t.name}+${o})`),-1,-1);try{const u=d.expandValue(this.createVariable.bind(this),s.result("value"),t.name,s);if(u)if("string"==typeof u){if("<nullptr>"===u){if(!n)return i();n=!1}else if('"'!==u[0])return r.push({name:"[err]",value:u,variablesReference:0}),i();r.push({name:`[${o++}]`,value:u,variablesReference:0}),a()}else r.push({name:"[err]",value:u,variablesReference:0}),i();else this.sendErrorResponse(e,15,"Could not expand variable")}catch(t){this.sendErrorResponse(e,14,"Could not expand variable: "+t)}}));a()}else this.sendErrorResponse(e,13,"Unimplemented variable request options: "+JSON.stringify(t.options))}else e.body={variables:r},this.sendResponse(e);else e.body={variables:[]},this.sendResponse(e)}))}pauseRequest(e,t){this.miDebugger.interrupt().then(t=>{this.sendResponse(e)},t=>{this.sendErrorResponse(e,3,"Could not pause: "+t)})}continueRequest(e,t){this.miDebugger.continue(t.threadId).then(t=>{e.body={allThreadsContinued:!0},this.sendResponse(e)},t=>{this.sendErrorResponse(e,2,"Could not continue: "+t)})}stepInRequest(e,t){return s(this,void 0,void 0,(function*(){try{let r=this.forceDisassembly;if(!r){const e=yield this.miDebugger.getFrame(t.threadId,0);if(r=!(yield this.checkFileExists(e.file)),this.activeEditorPath&&this.activeEditorPath.startsWith("disassembly:///")){const t=this.symbolTable.getFunctionByName(e.function,e.fileName);if(t){let e;e=t.file&&t.scope!==I.SymbolScope.Global?`disassembly:///${t.file}:::${t.name}.cdasm`:`disassembly:///${t.name}.cdasm`,e===this.activeEditorPath&&(r=!0)}}}yield this.miDebugger.step(t.threadId,r);this.sendResponse(e)}catch(t){this.sendErrorResponse(e,6,"Could not step over: "+t)}}))}stepOutRequest(e,t){this.miDebugger.stepOut(t.threadId).then(t=>{this.sendResponse(e)},t=>{this.sendErrorResponse(e,5,"Could not step out: "+t)})}nextRequest(e,t){return s(this,void 0,void 0,(function*(){try{let r=this.forceDisassembly;if(!r){const e=yield this.miDebugger.getFrame(t.threadId,0);if(r=!(yield this.checkFileExists(e.file)),this.activeEditorPath&&this.activeEditorPath.startsWith("disassembly:///")){const t=this.symbolTable.getFunctionByName(e.function,e.fileName);if(t){let e;e=t.file&&t.scope!==I.SymbolScope.Global?`disassembly:///${t.file}:::${t.name}.cdasm`:`disassembly:///${t.name}.cdasm`,e===this.activeEditorPath&&(r=!0)}}}yield this.miDebugger.next(t.threadId,r);this.sendResponse(e)}catch(t){this.sendErrorResponse(e,6,"Could not step over: "+t)}}))}checkFileExists(e){return e?this.fileExistsCache.has(e)?Promise.resolve(this.fileExistsCache.get(e)):new Promise((t,r)=>{f.exists(e,r=>{this.fileExistsCache.set(e,r),t(r)})}):Promise.resolve(!1)}evaluateRequest(e,t){return s(this,void 0,void 0,(function*(){const r=(e,t)=>t?this.variableHandles.create(new D(e,t)):this.variableHandles.create(e),s=e=>{let t;return this.variableHandlesReverse.hasOwnProperty(e.name)?t=this.variableHandlesReverse[e.name]:(t=r(e),this.variableHandlesReverse[e.name]=t),e.isCompound()?t:0};let n=this.currentThreadId,o=0;if(t.frameId?[n,o]=_.decodeReference(t.frameId):this.handleMsg("log",`Thread Warning: ${t.context}: eval. expression '${t.expression}' with no thread context. Using default\n`),"watch"===t.context)try{const r=t.expression,i=g.createHash("sha256");i.update(r);const u="watch_"+i.digest("hex");let c;try{const t=yield this.miDebugger.varUpdate(u,n,o);t.result("changelist").forEach(e=>{const t=l.MINode.valueOf(e,"name"),r=this.variableHandlesReverse[t];this.variableHandles.get(r).applyChanges(e)});const r=this.variableHandlesReverse[u];c=this.variableHandles.get(r),e.body={result:c.value,variablesReference:c.id}}catch(t){if(!(t instanceof a.MIError&&"Variable object not found"===t.message))throw t;{c=yield this.miDebugger.varCreate(r,u,"@");const t=s(c);c.exp=r,c.id=t,e.body={result:c.value,variablesReference:c.id}}}this.sendResponse(e)}catch(t){e.body={result:`<${t.toString()}>`,variablesReference:0},this.sendResponse(e),this.args.showDevDebugOutput&&this.handleMsg("stderr","watch: "+t.toString())}else if("hover"===t.context)try{const r=yield this.miDebugger.evalExpression(t.expression,n,o);e.body={variablesReference:0,result:r.result("value")},this.sendResponse(e)}catch(t){e.body={variablesReference:0,result:""},this.sendResponse(e),this.args.showDevDebugOutput&&this.handleMsg("stderr","hover: "+t.toString())}else this.miDebugger.sendCommand("thread-select "+n),this.miDebugger.sendCommand("stack-select-frame "+o),this.miDebugger.sendUserInput(t.expression).then(t=>{e.body=void 0===t?{result:"",variablesReference:0}:{result:JSON.stringify(t),variablesReference:0},this.sendResponse(e)},t=>{this.sendErrorResponse(e,8,t.toString())})}))}}function N(e){return"object"==typeof e?void 0!==e.length?e.join(", "):JSON.stringify(e):e}t.GDBDebugSession=_,n.DebugSession.run(_)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolServer=void 0;const s=r(0),n=r(9);class o{get event(){return this._event||(this._event=(e,t)=>{let r;return this._listener=e,this._this=t,r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class i extends s.EventEmitter{constructor(){super(),this._sendMessage=new o,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=new Buffer(0),e.on("data",e=>this._handleData(e)),e.on("close",()=>{this._emitEvent(new n.Event("close"))}),e.on("error",e=>{this._emitEvent(new n.Event("error","inStream error: "+(e&&e.message)))}),t.on("error",e=>{this._emitEvent(new n.Event("error","outStream error: "+(e&&e.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error("attempt to send more than one response for command "+e.command):this._send("response",e)}sendRequest(e,t,r,s){const o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),s){this._pendingRequests.set(o.seq,s);const e=setTimeout(()=>{clearTimeout(e);const t=this._pendingRequests.get(o.seq);t&&(this._pendingRequests.delete(o.seq),t(new n.Response(o,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new n.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(i.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const r=t[e].split(/: +/);"Content-Length"==r[0]&&(this._contentLength=+r[1])}this._rawData=this._rawData.slice(e+i.TWO_CRLF.length);continue}}break}}}t.ProtocolServer=i,i.TWO_CRLF="\r\n\r\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runDebugAdapter=void 0;const s=r(10);t.runDebugAdapter=function(e){let t=0;if(process.argv.slice(2).forEach((function(e,r,s){const n=/^--server=(\d{4,5})$/.exec(e);n&&(t=parseInt(n[1],10))})),t>0)console.error("waiting for debug protocol on port "+t),s.createServer(t=>{console.error(">> accepted connection from client"),t.on("end",()=>{console.error(">> client connection closed\n")});const r=new e(!1,!0);r.setRunAsServer(!0),r.start(t,t)}).listen(t);else{const t=new e(!1);process.on("SIGTERM",()=>{t.shutdown()}),t.start(process.stdin,process.stdout)}}},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDebugSession=void 0;const s=r(11),n=s.logger,o=r(8);class i extends o.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",e=>{n.error(e.body)})}start(e,t){super.start(e,t),n.init(e=>this.sendEvent(e),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof s.LogOutputEvent)){let t=e;e instanceof o.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign(Object.assign({},e.body),{output:"<output not logged>"})),n.verbose("To client: "+JSON.stringify(t))}super.sendEvent(e)}sendRequest(e,t,r,s){n.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,s)}sendResponse(e){n.verbose("To client: "+JSON.stringify(e)),super.sendResponse(e)}dispatchRequest(e){n.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=i},function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLogger=void 0;const n=r(3),o=r(1),i=r(27);const a=r(11);function u(){let e=new Date;return c(2,String(e.getUTCHours()))+":"+c(2,String(e.getUTCMinutes()))+":"+c(2,String(e.getUTCSeconds()))+"."+c(3,String(e.getUTCMilliseconds()))+" UTC"}function c(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.InternalLogger=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=a.LogLevel.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return s(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(o.isAbsolute(e.logFilePath)){const r=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,a.LogLevel.Error);try{yield(t=o.dirname(e.logFilePath),new Promise((e,r)=>{i(t,(t,s)=>{t?r(t):e(s)})})),this.log("Verbose logs are written to:\n",a.LogLevel.Warn),this.log(e.logFilePath+"\n",a.LogLevel.Warn),this._logFileStream=n.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",e=>{r(e)})}catch(e){r(e)}}else this.log("logFilePath must be an absolute path: "+e.logFilePath,a.LogLevel.Error);var t}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCDate()+", "+u();this.log(t+"\n",a.LogLevel.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==a.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const r=t===a.LogLevel.Error?console.error:t===a.LogLevel.Warn?console.warn:null;r&&r(a.trimLastNewline(e))}t===a.LogLevel.Error&&(e=`[${a.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+u()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const r=new a.LogOutputEvent(e,t);this._logCallback(r)}}}},function(e,t,r){var s=r(1),n=r(3),o=parseInt("0777",8);function i(e,t,r,a){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var u=t.mode,c=t.fs||n;void 0===u&&(u=o),a||(a=null);var l=r||function(){};e=s.resolve(e),c.mkdir(e,u,(function(r){if(!r)return l(null,a=a||e);switch(r.code){case"ENOENT":if(s.dirname(e)===e)return l(r);i(s.dirname(e),t,(function(r,s){r?l(r,s):i(e,t,l,s)}));break;default:c.stat(e,(function(e,t){e||!t.isDirectory()?l(r,a):l(null,a)}))}}))}e.exports=i.mkdirp=i.mkdirP=i,i.sync=function e(t,r,i){r&&"object"==typeof r||(r={mode:r});var a=r.mode,u=r.fs||n;void 0===a&&(a=o),i||(i=null),t=s.resolve(t);try{u.mkdirSync(t,a),i=i||t}catch(n){switch(n.code){case"ENOENT":i=e(s.dirname(t),r,i),e(t,r,i);break;default:var c;try{c=u.statSync(t)}catch(e){throw n}if(!c.isDirectory())throw n}}return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=void 0;t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MI2=t.escape=void 0;const n=r(14),o=r(5),i=r(0),a=r(6),u=r(1),c=r(1);u.posix;function l(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}t.escape=l;const d=/^(?:\d*|undefined)[\*\+\=]|[\~\@\&\^]/,h=/(?:\d*|undefined)\(gdb\)/,p=/\d+/;function f(e){return!d.exec(e)}class m extends i.EventEmitter{constructor(e,t){super(),this.application=e,this.args=t,this.currentToken=1,this.handlers={}}connect(e,t,r){return c.isAbsolute(t)||(t=c.join(e,t)),new Promise((s,n)=>{const i=[...this.args,t];this.process=o.spawn(this.application,i,{cwd:e,env:this.procEnv}),this.process.stdout.on("data",this.stdout.bind(this)),this.process.stderr.on("data",this.stderr.bind(this)),this.process.on("exit",(()=>{this.emit("quit")}).bind(this)),this.process.on("error",(e=>{this.emit("launcherror",e)}).bind(this));const a=this.sendCommand("gdb-set target-async on",!0),u=r.map(e=>this.sendCommand(e));u.push(a),Promise.all(u).then(()=>{this.emit("debug-ready"),s()},n)})}stdout(e){this.buffer+="string"==typeof e?e:e.toString("utf8");const t=this.buffer.lastIndexOf("\n");-1!==t&&(this.onOutput(this.buffer.substr(0,t)),this.buffer=this.buffer.substr(t+1)),this.buffer.length&&this.onOutputPartial(this.buffer)&&(this.buffer="")}stderr(e){this.errbuf+="string"==typeof e?e:e.toString("utf8");const t=this.errbuf.lastIndexOf("\n");-1!==t&&(this.onOutputStderr(this.errbuf.substr(0,t)),this.errbuf=this.errbuf.substr(t+1)),this.errbuf.length&&(this.logNoNewLine("stderr",this.errbuf),this.errbuf="")}onOutputStderr(e){(e=e.split("\n")).forEach(e=>{this.log("stderr",e)})}onOutputPartial(e){return!!f(e)&&(this.logNoNewLine("stdout",e),!0)}onOutput(e){(e=e.split("\n")).forEach(e=>{if(f(e))h.exec(e)||this.log("stdout",e);else{const t=a.parseMI(e);this.debugOutput&&this.log("log","GDB -> App: "+JSON.stringify(t));let r=!1;void 0!==t.token&&this.handlers[t.token]&&(this.handlers[t.token](t),delete this.handlers[t.token],r=!0),!r&&t.resultRecords&&"error"===t.resultRecords.resultClass&&this.log("stderr",t.result("msg")||e),t.outOfBandRecord&&(t.outOfBandRecord.forEach(e=>{if(e.isStream)this.log(e.type,e.content);else if("exec"===e.type)if(this.emit("exec-async-output",t),"running"===e.asyncClass)this.emit("running",t);else if("stopped"===e.asyncClass){const e=t.record("reason");0,"breakpoint-hit"===e?this.emit("breakpoint",t):"end-stepping-range"===e?this.emit("step-end",t):"function-finished"===e?this.emit("step-out-end",t):"signal-received"===e?this.emit("signal-stop",t):"exited-normally"===e?this.emit("exited-normally",t):"exited"===e?(this.log("stderr","Program exited with code "+t.record("exit-code")),this.emit("exited-normally",t)):(this.log("console","Not implemented stop reason (assuming exception): "+e),this.emit("stopped",t)),this.emit("generic-stopped",t)}else this.log("log",JSON.stringify(t));else if("notify"===e.type){let t,r;for(const s of e.output)"id"===s[0]?t=s[1]:"group-id"===s[0]&&(r=s[1]);"thread-created"===e.asyncClass?this.emit("thread-created",{threadId:parseInt(t),threadGroupId:r}):"thread-exited"===e.asyncClass?this.emit("thread-exited",{threadId:parseInt(t),threadGroupId:r}):"thread-selected"===e.asyncClass?this.emit("thread-selected",{threadId:parseInt(t)}):"thread-group-exited"===e.asyncClass&&this.emit("thread-group-exited",{threadGroupId:t})}}),r=!0),void 0===t.token&&void 0===t.resultRecords&&0===t.outOfBandRecord.length&&(r=!0),r||this.log("log","Unhandled: "+JSON.stringify(t))}})}tryKill(){const e=this.process;try{process.kill(-e.pid)}catch(t){this.log("log","kill failed for "+-e.pid+t)}}stop(){return s(this,void 0,void 0,(function*(){this.process;const e=setTimeout(()=>{this.tryKill()},1e3);this.process.on("exit",t=>{clearTimeout(e)}),yield this.sendCommand("target-disconnect"),this.sendRaw("-gdb-exit")}))}detach(){return s(this,void 0,void 0,(function*(){yield this.sendCommand("target-detach"),this.stop()}))}interrupt(e=""){return new Promise((t,r)=>{this.sendCommand("exec-interrupt "+e).then(e=>{t("done"===e.resultRecords.resultClass)},r)})}continue(e){return new Promise((t,r)=>{this.sendCommand("exec-continue --thread "+e).then(e=>{t("running"===e.resultRecords.resultClass)},r)})}next(e,t){return new Promise((r,s)=>{const n=t?"exec-next-instruction":"exec-next";this.sendCommand(`${n} --thread ${e}`).then(e=>{r("running"===e.resultRecords.resultClass)},s)})}step(e,t){return new Promise((r,s)=>{const n=t?"exec-step-instruction":"exec-step";this.sendCommand(`${n} --thread ${e}`).then(e=>{r("running"===e.resultRecords.resultClass)},s)})}stepOut(e){return new Promise((t,r)=>{this.sendCommand("exec-finish --thread "+e).then(e=>{t("running"===e.resultRecords.resultClass)},r)})}restart(e){return this._sendCommandSequence(e)}postStart(e){return this._sendCommandSequence(e)}_sendCommandSequence(e){return new Promise((t,r)=>{const s=(e=>{if(0===e.length)t(!0);else{const t=e[0];this.sendCommand(t).then(t=>{s(e.slice(1))},r)}}).bind(this);s(e)})}changeVariable(e,t){return this.sendCommand("gdb-set var "+e+"="+t)}setBreakPointCondition(e,t){return this.sendCommand("break-condition "+e+" "+t)}addBreakPoint(e){return new Promise((t,r)=>{let s="";if(e.countCondition)if(">"===e.countCondition[0])s+="-i "+p.exec(e.countCondition.substr(1))[0]+" ";else{const t=p.exec(e.countCondition)[0];t.length!==e.countCondition.length?(this.log("stderr","Unsupported break count expression: '"+e.countCondition+"'. Only supports 'X' for breaking once after X times or '>X' for ignoring the first X breaks"),s+="-t "):0!==parseInt(t)&&(s+="-t -i "+parseInt(t)+" ")}e.raw?s+="*"+l(e.raw):s+='"'+l(e.file)+":"+e.line+'"',this.sendCommand("break-insert "+s).then(s=>{if("done"===s.resultRecords.resultClass){const n=parseInt(s.result("bkpt.number"));e.number=n,e.condition?this.setBreakPointCondition(n,e.condition).then(r=>{"done"===r.resultRecords.resultClass?t(e):t(null)},r):t(e)}else t(null)},r)})}removeBreakpoints(e){return new Promise((t,r)=>{if(0===e.length)t(!0);else{const s="break-delete "+e.join(" ");this.sendCommand(s).then(e=>{t("done"===e.resultRecords.resultClass)},r)}})}getFrame(e,t){return new Promise((r,s)=>{const n=`stack-info-frame --thread ${e} --frame ${t}`;this.sendCommand(n).then(e=>{const t=e.result("frame"),s=a.MINode.valueOf(t,"level"),n=a.MINode.valueOf(t,"addr"),o=a.MINode.valueOf(t,"func"),i=a.MINode.valueOf(t,"file"),u=a.MINode.valueOf(t,"fullname");let c=0;const l=a.MINode.valueOf(t,"line");l&&(c=parseInt(l)),r({address:n,fileName:i,file:u,function:o,level:s,line:c})},s)})}getStackDepth(e){return new Promise((t,r)=>{this.sendCommand(`stack-info-depth --thread ${e} 10000`).then(e=>{const r=e.result("depth"),s=parseInt(r);t(s)},r)})}getStack(e,t,r){return new Promise((s,n)=>{this.sendCommand(`stack-list-frames --thread ${e} ${t} ${r}`).then(e=>{const t=e.result("stack"),r=[];t.forEach(e=>{const t=a.MINode.valueOf(e,"@frame.level"),s=a.MINode.valueOf(e,"@frame.addr"),n=a.MINode.valueOf(e,"@frame.func"),o=a.MINode.valueOf(e,"@frame.file"),i=a.MINode.valueOf(e,"@frame.fullname");let u=0;const c=a.MINode.valueOf(e,"@frame.line");c&&(u=parseInt(c));const l=parseInt(a.MINode.valueOf(e,"@frame.from"));r.push({address:s,fileName:o,file:i,function:n||l,level:t,line:u})}),s(r)},n)})}getStackVariables(e,t){return s(this,void 0,void 0,(function*(){const r=(yield this.sendCommand(`stack-list-variables --thread ${e} --frame ${t} --simple-values`)).result("variables"),s=[];for(const e of r){const t=a.MINode.valueOf(e,"name"),r=a.MINode.valueOf(e,"value"),n=a.MINode.valueOf(e,"type");s.push({name:t,valueStr:r,type:n,raw:e})}return s}))}examineMemory(e,t){return new Promise((r,s)=>{this.sendCommand("data-read-memory-bytes 0x"+e.toString(16)+" "+t).then(e=>{r(e.result("memory[0].contents"))},s)})}evalExpression(e,t,r){return new Promise((s,n)=>{const o=m.getThreadFrameStr(t,r);this.sendCommand(`data-evaluate-expression ${o} `+e).then(e=>{s(e)},n)})}varCreate(e,t="-",r="@"){return s(this,void 0,void 0,(function*(){let s=null;e=e.trim(),/,[bdhonx]$/i.test(e)&&(s=e.substring(e.length-1).toLocaleLowerCase(),e=e.substring(0,e.length-2)),e=e.replace(/"/g,'\\"');const o=yield this.sendCommand(`var-create ${t} ${r} "${e}"`);let i=null;if(s&&"-"!==t){const e=yield this.sendCommand(`var-set-format ${t} ${m.FORMAT_SPEC_MAP[s]}`);i=e.result("value")}let a=o.result("");return i&&(a=a.map(e=>"value"===e[0]?["value",i]:e)),new n.VariableObject(a)}))}varEvalExpression(e){return s(this,void 0,void 0,(function*(){return this.sendCommand("var-evaluate-expression "+e)}))}varListChildren(e,t){return s(this,void 0,void 0,(function*(){const r=(yield this.sendCommand("var-list-children --all-values "+e)).result("children")||[],s=[];for(const e of r){const r=new n.VariableObject(e[1]);t&&r.exp.startsWith("<anonymous ")?s.push(...yield this.varListChildren(r.name,t)):s.push(r)}return s}))}static getThreadFrameStr(e,t){return(e>0?`--thread ${e} `:"")+(t>=0?"--frame "+t:"")}varUpdate(e="*",t,r){return s(this,void 0,void 0,(function*(){return this.sendCommand(`var-update ${m.getThreadFrameStr(t,r)} --all-values ${e}`)}))}varAssign(e,t,r,n){return s(this,void 0,void 0,(function*(){return this.sendCommand(`var-assign ${m.getThreadFrameStr(r,n)} ${e} ${t}`)}))}logNoNewLine(e,t){this.emit("msg",e,t)}log(e,t){this.emit("msg",e,"\n"===t[t.length-1]?t:t+"\n")}sendUserInput(e){return e.startsWith("-")?this.sendCommand(e.substr(1)):this.sendCommand(`interpreter-exec console "${e}"`)}sendRaw(e){this.printCalls&&this.log("log",e),e.includes("undefined")&&console.log(e),this.process.stdin.write(e+"\n")}getCurrentToken(){return this.currentToken}sendCommand(e,t=!1){const r=this.currentToken++;return new Promise((s,o)=>{this.handlers[r]=r=>{r&&r.resultRecords&&"error"===r.resultRecords.resultClass?t?(this.log("stderr",`WARNING: Error executing command '${e}'`),s(r)):o(new n.MIError(r.result("msg")||"Internal error",e)):s(r)},this.sendRaw(r+"-"+e)})}isReady(){return!!this.process}}t.MI2=m,m.FORMAT_SPEC_MAP={b:"binary",d:"decimal",h:"hexadecimal",o:"octal",n:"natural",x:"hexadecimal"}},function(e,t,r){"use strict";function s(e,t){let r=0;const s=e+t-1;for(let t=e;t<=s;t++)r=(r|1<<t)>>>0;return r}function n(e){return/^0b([01]+)$/i.test(e)?parseInt(e.substring(2),2):/^0x([0-9a-f]+)$/i.test(e)?parseInt(e.substring(2),16):/^[0-9]+/i.test(e)?parseInt(e,10):/^#[0-1]+/i.test(e)?parseInt(e.substring(1),2):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.parseDimIndex=t.parseInteger=t.extractBits=t.createMask=t.binaryFormat=t.hexFormat=void 0,t.hexFormat=function(e,t=8,r=!0){let s=e.toString(16);for(;s.length<t;)s="0"+s;return r?"0x"+s:s},t.binaryFormat=function(e,t=0,r=!0,s=!1){let n=(e>>>0).toString(2);for(;n.length<t;)n="0"+n;if(s){const e=4-n.length%4;for(let t=0;t<e;t++)n="0"+n;const t=n.match(/[01]{4}/g);n=t.join(" "),n=n.substring(e)}return r?"0b"+n:n},t.createMask=s,t.extractBits=function(e,t,r){return(e&s(t,r))>>>t>>>0},t.parseInteger=n,t.parseDimIndex=function(e,t){if(-1!==e.indexOf(",")){const r=e.split(",").map(e=>e.trim());if(r.length!==t)throw new Error("dimIndex Element has invalid specification.");return r}if(/^([0-9]+)\-([0-9]+)$/i.test(e)){const r=e.split("-").map(e=>n(e)),s=r[0];if(r[1]-s+1<t)throw new Error("dimIndex Element has invalid specification.");const o=[];for(let e=0;e<t;e++)o.push(""+(s+e));return o}if(/^[a-zA-Z]\-[a-zA-Z]$/.test(e)){const r=e.charCodeAt(0);if(e.charCodeAt(2)-r+1<t)throw new Error("dimIndex Element has invalid specification.");const s=[];for(let e=0;e<t;e++)s.push(String.fromCharCode(r+e));return s}return[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDBServer=void 0;const s=r(5),n=r(2),o=r(0),i=r(15),a=r(16);class u extends o.EventEmitter{constructor(e,t,r,s,n){super(),this.cwd=e,this.application=t,this.args=r,this.initMatch=s,this.port=n,this.outBuffer="",this.errBuffer=""}init(){return new Promise((e,t)=>{null!==this.application?(this.initResolve=e,this.initReject=t,this.process=s.spawn(this.application,this.args,{cwd:this.cwd}),this.process.stdout.on("data",this.onStdout.bind(this)),this.process.stderr.on("data",this.onStderr.bind(this)),this.process.on("exit",this.onExit.bind(this)),this.process.on("error",this.onError.bind(this)),"number"==typeof this.port&&this.port>0&&a.TcpPortScanner.waitForPortOpen(this.port,u.LOCALHOST,!0,50,u.SERVER_TIMEOUT-1e3).then(()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)}).catch(e=>{}),-1!==this.application.indexOf("st-util")&&"win32"===n.platform()&&i.setTimeout(()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)},500),null==this.initMatch&&i.setTimeout(()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)},1e3)):e()})}exit(){this.process&&(this.process.kill(),this.process=null)}onExit(e,t){this.emit("exit",e,t)}onError(e){this.initReject&&(this.initReject(e),this.initReject=null,this.initResolve=null),this.emit("launcherror",e)}onStdout(e){this.outBuffer+="string"==typeof e?e:e.toString("utf8"),this.initResolve&&this.initMatch.test(this.outBuffer)&&(this.initResolve(!0),this.initResolve=null,this.initReject=null);const t=this.outBuffer.lastIndexOf("\n");-1!==t&&(this.emit("output",this.outBuffer.substring(0,t)),this.outBuffer=this.outBuffer.substring(t+1))}onStderr(e){this.errBuffer+="string"==typeof e?e:e.toString("utf8"),this.initResolve&&this.initMatch.test(this.errBuffer)&&(this.initResolve(!0),this.initResolve=null,this.initReject=null);const t=this.errBuffer.lastIndexOf("\n");-1!==t&&(this.emit("output",this.errBuffer.substring(0,t)),this.errBuffer=this.errBuffer.substring(t+1))}}t.GDBServer=u,u.SERVER_TIMEOUT=1e4,u.LOCALHOST="0.0.0.0"},function(e,t,r){"use strict";t.check=c,t.waitUntilFreeOnHost=function(e,t,r,n){var o;s.obj(e)?(o=e).inUse=!1:o=u(e,t,!1,r,n);return l(o)},t.waitUntilFree=function(e,t,r){var n;s.obj(e)?((n=e).host="127.0.0.1",n.inUse=!1):n=u(e,"127.0.0.1",!1,t,r);return l(n)},t.waitUntilUsedOnHost=d,t.waitUntilUsed=function(e,t,r){var n;s.obj(e)?((n=e).host="127.0.0.1",n.inUse=!0):n=u(e,"127.0.0.1",!0,t,r);return d(n)},t.waitForStatus=l;var s=r(33),n=r(10),o=r(17),i=r(38)("tcp-port-used");function a(){var e,t,r=new Promise((function(r,s){e=r,t=s}));return{resolve:e,reject:t,promise:r}}function u(e,t,r,s,n){var o={};return o.port=e,o.host=t,o.inUse=r,o.retryTimeMs=s,o.timeOutMs=n,o}function c(e,t){var r,c,l=a(),d=!0;if(c=s.obj(e)?e:u(e,t),!s.port(c.port))return i("Error invalid port: "+o.inspect(c.port)),l.reject(new Error("invalid port: "+o.inspect(c.port))),l.promise;function h(){r&&(r.removeAllListeners("connect"),r.removeAllListeners("error"),r.end(),r.destroy(),r.unref())}return s.nullOrUndefined(c.host)&&(i("set host address to default 127.0.0.1"),c.host="127.0.0.1"),(r=new n.Socket).once("connect",(function(){l.resolve(d),h()})),r.once("error",(function(e){"ECONNREFUSED"!==e.code?l.reject(e):(d=!1,l.resolve(d)),h()})),r.connect({port:c.port,host:c.host},(function(){})),l.promise}function l(e,t,r,n,o){var l,d,h,p=a(),f=!1;if(h=s.obj(e)?e:u(e,t,r,n,o),!s.bool(h.inUse))return p.reject(new Error("inUse must be a boolean")),p.promise;function m(){l&&clearTimeout(l),d&&clearTimeout(d)}return s.positiveInt(h.retryTimeMs)||(h.retryTimeMs=250,i("set retryTime to default 250ms")),s.positiveInt(h.timeOutMs)||(h.timeOutMs=2e3,i("set timeOutMs to default 2000ms")),l=setTimeout((function(){f=!0,m(),p.reject(new Error("timeout"))}),h.timeOutMs),function e(){c(h.port,h.host).then((function(t){if(!f)return t===h.inUse?(p.resolve(),void m()):void(d=setTimeout((function(){e()}),h.retryTimeMs))}),(function(e){f||(p.reject(e),m())}))}(),p.promise}function d(e,t,r,n){var o;return s.obj(e)?(o=e).inUse=!0:o=u(e,t,!0,r,n),l(o)}},function(e,t,r){"use strict";const s={}.hasOwnProperty,n={}.toString,o=t,i=r(34),a=r(35);o.version=r(36).version,o.browser=function(){return!o.node()&&"undefined"!=typeof window&&"[object global]"===n.call(window)},o.defined=function(e){return void 0!==e},o.def=o.defined,o.nodejs=function(){return process&&process.hasOwnProperty("version")&&process.hasOwnProperty("versions")},o.node=o.nodejs,o.undefined=function(e){return void 0===e},o.udef=o.undef=o.undefined,o.array=function(e){return"[object Array]"===n.call(e)},o.arr=o.ary=o.arry=o.array,o.arrayLike=function(e){return!o.nullOrUndef(e)&&(void 0!==e&&s.call(e,"length")&&isFinite(e.length))},o.arrLike=o.arryLike=o.aryLike=o.arraylike=o.arrayLike,o.arguments=function(e){return"[object Arguments]"===n.call(e)},o.args=o.arguments,o.boolean=function(e){return"[object Boolean]"===n.call(e)},o.bool=o.boolean,o.buffer=function(e){return o.nodejs()&&Buffer&&Buffer.hasOwnProperty("isBuffer")&&Buffer.isBuffer(e)},o.buff=o.buf=o.buffer,o.date=function(e){return"[object Date]"===n.call(e)},o.error=function(e){return"[object Error]"===n.call(e)},o.err=o.error,o.false=function(e){return!1===e},o.function=function(e){return o.syncFunction(e)||o.asyncFunction(e)},o.fun=o.func=o.function,o.asyncFunction=function(e){return"[object AsyncFunction]"===n.call(e)},o.asyncFun=o.asyncFunc=o.asyncFunction,o.syncFunction=function(e){return"[object Function]"===n.call(e)},o.syncFun=o.syncFunc=o.syncFunction,o.null=function(e){return null===e},o.nullOrUndefined=function(e){return null==e},o.nullOrUndef=o.nullOrUndefined,o.number=function(e){return"[object Number]"===n.call(e)},o.num=o.number,o.object=function(e){return"[object Object]"===n.call(e)},o.obj=o.object,o.regExp=function(e){return"[object RegExp]"===n.call(e)},o.re=o.regexp=o.regExp,o.string=function(e){return"[object String]"===n.call(e)},o.str=o.string,o.true=function(e){return!0===e};var u=new RegExp("[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}","i");o.uuid=function(e){return u.test(e)},o.equal=function(e,t){var r=n.call(e);return typeof e==typeof t&&(r===n.call(t)&&("[object Object]"===r||"[object Array]"===r?i(e,t):"[object Function]"===r?e.prototype===t.prototype:"[object Date]"===r?e.getTime()===t.getTime():e===t))},o.objEquals=o.eq=o.equal;var c={boolean:1,number:1,string:1,undefined:1};o.hosted=function(e,t){if(o.nullOrUndef(e))return!1;var r=typeof t[e];return"object"===r?!!t[e]:!c[r]},o.instanceOf=function(e,t){return!o.nullOrUndef(e)&&!o.nullOrUndef(t)&&e instanceof t},o.instOf=o.instanceof=o.instanceOf,o.objectInstanceOf=function(e,t){try{return"[object Object]"===n.call(e)&&e instanceof t}catch(e){return!1}},o.instOf=o.instanceOf=o.objInstOf=o.objectInstanceOf,o.type=function(e,t){return typeof e===t},o.a=o.type,o.empty=function(e){var t=n.call(e);if("[object Array]"===t||"[object Arguments]"===t)return 0===e.length;if("[object Object]"===t){for(var r in e)if(s.call(e,r))return!1;return!0}return"[object String]"===t&&""===e},o.emptyArguments=function(e){return"[object Arguments]"===n.call(e)&&0===e.length},o.noArgs=o.emptyArgs=o.emptyArguments,o.emptyArray=function(e){return"[object Array]"===n.call(e)&&0===e.length},o.emptyArry=o.emptyAry=o.emptyArray,o.emptyArrayLike=function(e){return 0===e.length},o.emptyArrLike=o.emptyArrayLike,o.emptyString=function(e){return o.string(e)&&0===e.length},o.emptyStr=o.emptyString,o.nonEmptyArray=function(e){return"[object Array]"===n.call(e)&&e.length>0},o.nonEmptyArr=o.nonEmptyArry=o.nonEmptyAry=o.nonEmptyArray,o.nonEmptyObject=function(e){return"[object Object]"===n.call(e)&&Object.keys(e).length>0},o.nonEmptyObj=o.nonEmptyObject,o.emptyObject=function(e){return"[object Object]"===n.call(e)&&0===Object.keys(e).length},o.emptyObj=o.emptyObject,o.nonEmptyString=function(e){return o.string(e)&&e.length>0},o.nonEmptyStr=o.nonEmptyString,o.even=function(e){return"[object Number]"===n.call(e)&&e%2==0},o.decimal=function(e){return"[object Number]"===n.call(e)&&e%1!=0},o.dec=o.decNum=o.decimal,o.integer=function(e){return"[object Number]"===n.call(e)&&e%1==0},o.int=o.integer,o.notANumber=function(e){return!o.num(e)||e!=e},o.nan=o.notANum=o.notANumber,o.odd=function(e){return!o.decimal(e)&&"[object Number]"===n.call(e)&&e%2!=0},o.oddNumber=o.oddNum=o.odd,o.positiveNumber=function(e){return"[object Number]"===n.call(e)&&e>0},o.pos=o.positive=o.posNum=o.positiveNum=o.positiveNumber,o.negativeNumber=function(e){return"[object Number]"===n.call(e)&&e<0},o.neg=o.negNum=o.negativeNum=o.negativeNumber,o.negativeInteger=function(e){return"[object Number]"===n.call(e)&&e%1==0&&e<0},o.negativeInt=o.negInt=o.negativeInteger,o.positiveInteger=function(e){return"[object Number]"===n.call(e)&&e%1==0&&e>0},o.posInt=o.positiveInt=o.positiveInteger,o.divisibleBy=function(e,t){return 0!==e&&("[object Number]"===n.call(e)&&0!==t&&e%t==0)},o.divBy=o.divisBy=o.divisibleBy,o.greaterOrEqualTo=function(e,t){return e>=t},o.greaterOrEqual=o.ge=o.greaterOrEqualTo,o.greaterThan=function(e,t){return e>t},o.gt=o.greaterThan,o.lessThanOrEqualTo=function(e,t){return e<=t},o.lessThanOrEq=o.lessThanOrEqual=o.le=o.lessThanOrEqualTo,o.lessThan=function(e,t){return e<t},o.lt=o.lessThan,o.maximum=function(e,t){if(!o.arrayLike(t)||!o.number(e))return!1;for(var r=t.length;--r>-1;)if(e<t[r])return!1;return!0},o.max=o.maximum,o.minimum=function(e,t){if(!o.arrayLike(t)||!o.number(e))return!1;for(var r=t.length;--r>-1;)if(e>t[r])return!1;return!0},o.min=o.minimum,o.within=function(e,t,r){return e>=t&&e<=r},o.withIn=o.within,o.prettyClose=function(e,t,r){return!(!o.number(e)||!o.number(t))&&(!(o.defined(r)&&!o.posInt(r))&&(o.undefined(r)&&(r=2),e.toFixed(r)===t.toFixed(r)))},o.closish=o.near=o.prettyClose,o.dnsAddress=function(e){return!!o.nonEmptyStr(e)&&(!(e.length>255)&&(!d.test(e)&&!!l.test(e)))},o.dnsAddr=o.dns=o.dnsAddress;var l=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,d=/^([0-9]|[0-9][0-9\-]{0,61}[0-9])(\.([0-9]|[0-9][0-9\-]{0,61}[0-9]))*$/;o.emailAddress=function(e){return!!o.nonEmptyStr(e)&&h.test(e)},o.email=o.emailAddr=o.emailAddress;var h=/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/;o.ipv4Address=function(e){if(!o.nonEmptyStr(e))return!1;if(e.length>15)return!1;var t=e.split(".");if(!o.array(t)||4!==t.length)return!1;for(var r=0;r<t.length;r++){var s=parseInt(t[r],10);if(isNaN(s))return!1;if(s<0||s>255)return!1}return!0},o.ipv4=o.ipv4Addr=o.ipv4Address,o.ipv6Address=function(e){return!!o.nonEmptyStr(e)&&a.v6({extract:!0}).test(e)},o.ipv6=o.ipv6Addr=o.ipv6Address,o.ipAddress=function(e){return!!o.nonEmptyStr(e)&&(o.ipv4Address(e)||o.ipv6Address(e))},o.ip=o.ipAddr=o.ipAddress,o.hostAddress=function(e){return!!o.nonEmptyStr(e)&&(o.dns(e)||o.ipv4(e)||o.ipv6(e))},o.host=o.hostIp=o.hostAddr=o.hostAddress,o.port=function(e){return!(!o.num(e)||o.negativeInt(e)||e>65535)},o.systemPort=function(e){return!!(o.port(e)&&e<1024)},o.sysPort=o.systemPort,o.userPort=function(e){return!!(o.port(e)&&e>1023)},o.creditCardNumber=function(e){if(!o.str(e))return!1;var t,r,s=e.split("");for(t=s.length-1,r=1;t>-1;t--,r++)r%2==0&&(s[t]*=2);e=s.join("");var n=0;for(t=0;t<e.length;t++)n+=Math.floor(e[t]);return n%10==0},o.creditCard=o.creditCardNum=o.creditCardNumber,o.americanExpressCardNumber=function(e){if(!o.str(e)||15!==e.length)return!1;var t=Math.floor(e.slice(0,2));return(34===t||37===t)&&!!o.creditCardNumber(e)},o.amexCard=o.amexCardNum=o.americanExpressCardNumber,o.chinaUnionPayCardNumber=function(e){if(!o.str(e)||e.length<16&&e.length>19)return!1;var t=Math.floor(e.slice(0,2));return 62===t||88===t},o.chinaUnion=o.chinaUnionPayCard=o.chinaUnionPayCardNumber,o.dinersClubCarteBlancheCardNumber=function(e){if(!o.str(e)||14!==e.length)return!1;var t=Math.floor(e.slice(0,3));return!(t<300||t>305)&&!!o.creditCardNumber(e)},o.dinersClubCB=o.dinersClubCarteBlancheCard=o.dinersClubCarteBlancheCardNumber,o.dinersClubInternationalCardNumber=function(e){if(!o.str(e)||14!==e.length)return!1;var t=Math.floor(e.slice(0,3)),r=Math.floor(e.slice(0,2));return(!(t<300||t>305)||309===t||36===r||!(r<38||r>39))&&!!o.creditCardNumber(e)},o.dinersClubInt=o.dinersClubInternationalCard=o.dinersClubInternationalCardNumber,o.dinersClubUSACanadaCardNumber=function(e){if(!o.str(e)||16!==e.length)return!1;var t=Math.floor(e.slice(0,2));return(54===t||55===t)&&!!o.creditCardNumber(e)},o.dinersClub=o.dinersClubUSACanCard=o.dinersClubUSACanadaCardNumber,o.discoverCardNumber=function(e){if(!o.str(e)||16!==e.length)return!1;var t=Math.floor(e.slice(0,6)),r=Math.floor(e.slice(0,3));return("6011"===e.slice(0,4)||!(t<622126||t>622925)||!(r<644||r>649)||"65"===e.slice(0,2))&&!!o.creditCardNumber(e)},o.discover=o.discoverCard=o.discoverCardNumber,o.instaPaymentCardNumber=function(e){if(!o.str(e)||16!==e.length)return!1;var t=Math.floor(e.slice(0,3));return!(t<637||t>639)&&!!o.creditCardNumber(e)},o.instaPayment=o.instaPaymentCardNumber,o.jcbCardNumber=function(e){if(!o.str(e)||16!==e.length)return!1;var t=Math.floor(e.slice(0,4));return!(t<3528||t>3589)&&!!o.creditCardNumber(e)},o.jcb=o.jcbCard=o.jcbCardNumber,o.laserCardNumber=function(e){if(!o.str(e)||e.length<16&&e.length>19)return!1;var t=Math.floor(e.slice(0,4));return-1!==[6304,6706,6771,6709].indexOf(t)&&!!o.creditCardNumber(e)},o.laser=o.laserCard=o.laserCardNumber,o.maestroCardNumber=function(e){if(!o.str(e)||e.length<12||e.length>19)return!1;var t=e.slice(0,4);return-1!==["5018","5020","5038","5612","5893","6304","6759","6761","6762","6763","0604","6390"].indexOf(t)&&!!o.creditCardNumber(e)},o.maestro=o.maestroCard=o.maestroCardNumber,o.dankortCardNumber=function(e){return!(!o.str(e)||16!==e.length)&&("5019"===e.slice(0,4)&&!!o.creditCardNumber(e))},o.dankort=o.dankortCard=o.dankortCardNumber,o.masterCardCardNumber=function(e){if(!o.str(e)||16!==e.length)return!1;var t=Math.floor(e.slice(0,2));return!(t<50||t>55)&&!!o.creditCardNumber(e)},o.masterCard=o.masterCardCard=o.masterCardCardNumber,o.visaCardNumber=function(e){return!(!o.str(e)||13!==e.length&&16!==e.length)&&("4"===e.slice(0,1)&&!!o.creditCardNumber(e))},o.visa=o.visaCard=o.visaCardNumber,o.visaElectronCardNumber=function(e){if(!o.str(e)||16!==e.length)return!1;var t=Math.floor(e.slice(0,4));return"417500"!==e.slice(0,6)&&-1===[4026,4405,4508,4844,4913,4917].indexOf(t)||o.creditCardNumber(e),!1},o.visaElectron=o.visaElectronCard=o.visaElectronCardNumber;var p=/^[0-9a-fA-F]{24}$/;o.mongoId=o.objectId=o.objId=function(e){return Boolean(e)&&!Array.isArray(e)&&p.test(String(e))},o.matching=o.match=o.inArgs=function(e){if(arguments.length<2)return!1;for(var t=!1,r=1;r<arguments.length;r++){var s=o.equal(e,arguments[r]);t=t||s}return t},o.streetAddress=function(e){if(!o.str(e))return!1;return/\b\d+[\s](?:[A-Za-z0-9.-]+[\s]+)+\b(ALLEY|ALY|AVENUE|AVE|BEND|BND|BLUFFS?|BLFS?|BOULEVARD|BLVD|BRANCH|BR|CENTERS?|CTRS?|CIRCLES?|CIRS?|CLIFFS?|CLFS?|COURTS?|CTS?|COVES?|CVS?|CREEK|CRK|CRESCENT|CRES|CREST|CRST|CROSSING|XING|DRIVES?|DRS?|EXPRESSWAY|EXPY|FREEWAY|FWY|HEIGHTS|HTS|HIGHWAY|HWY|HILLS?|HLS?|LANE|LN|LOOP|MANORS?|MNRS?|MOTORWAY|MTWY|MOUNT|MT|PARKS?|PARKWAYS?|PKWY|PASS|PLACE|PL|PLAZA|PLZ|POINTS?|PTS?|RIDGES?|RDGS?|ROADS?|RDS?|ROUTE|RTE?|SHOALS?|SHLS?|SHORES?|SHRS?|SPRINGS?|SPGS?|SPURS?|STREETS?|STS?|SUMMIT|SMT|TERRACE|TER|THROUGHWAY|TRWY|TRAFFICWAY|TRFY|TRAIL|TRL|TURNPIKE|TPKE|VALLEYS?|VLYS?|WAYS?)+(?:[\.\-\s\,]?)*((APARTMENT|APT|APPT|#|NUMBER|NUM|FLOOR|FL|\s)?(\d)*)\b/gi.test(e)},o.street=o.address=o.streetAddress,o.zipCode=function(e){if(o.undefined(e)||!o.string(e)&&!o.number(e))return!1;return/^\d{5}(?:-\d{4})?$/.test(e)},o.zip=o.zipCode,o.phoneNumber=function(e){if(!o.string(e))return!1;return/(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:(\(?)(?:(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]‌​)\s*)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\)?)\s*(?:[.-]\s*)?)?([2-9]1[02-‌​9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})/g.test(e)},o.phone=o.phoneNumber;var f=r(37);o.url=function(e){return f(e)},o.uri=o.url,o.enumerator=function(e,t){var r=!1;if(!o.defined(e)||!o.defined(t)||!o.arrayLike(t))return r;for(var s=0,n=t.length;s<n;s++)if(o.equal(e,t[s])){r=!0;break}return r},o.enum=o.inArray=o.enumerator},function(e,t){var r=Array.prototype.slice,s="function"==typeof Object.keys?Object.keys:function(e){var t=[];for(var r in e)t.push(r);return t},n=e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():a(e)?a(t):"object"!=typeof e&&"object"!=typeof t?e==t:function(e,t){if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=r.call(e),t=r.call(t),n(e,t));try{var a,u,c=s(e),l=s(t)}catch(e){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),u=c.length-1;u>=0;u--)if(c[u]!=l[u])return!1;for(u=c.length-1;u>=0;u--)if(a=c[u],!n(e[a],t[a]))return!1;return!0}(e,t))};function o(e){return null==e}function i(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return"number"==typeof e&&e!=e}},function(e,t,r){"use strict";const s=e=>e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=[a-fA-F\\d:])|(?<=[a-fA-F\\d:])(?=\\s|$))":"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",i=`\n(?:\n(?:${o}:){7}(?:${o}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${o}:){6}(?:${n}|:${o}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${o}:){5}(?::${n}|(?::${o}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${o}:){4}(?:(?::${o}){0,1}:${n}|(?::${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${o}:){3}(?:(?::${o}){0,2}:${n}|(?::${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${o}:){2}(?:(?::${o}){0,3}:${n}|(?::${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${o}:){1}(?:(?::${o}){0,4}:${n}|(?::${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${o}){0,5}:${n}|(?::${o}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp(`(?:^${n}$)|(?:^${i}$)`),u=new RegExp(`^${n}$`),c=new RegExp(`^${i}$`),l=e=>e&&e.exact?a:new RegExp(`(?:${s(e)}${n}${s(e)})|(?:${s(e)}${i}${s(e)})`,"g");l.v4=e=>e&&e.exact?u:new RegExp(`${s(e)}${n}${s(e)}`,"g"),l.v6=e=>e&&e.exact?c:new RegExp(`${s(e)}${i}${s(e)}`,"g"),e.exports=l},function(e){e.exports=JSON.parse('{"_args":[["is2@2.0.6","/Volumes/Users/marcel/Projects/Personal/cortex-debug/cortex-debug"]],"_from":"is2@2.0.6","_id":"is2@2.0.6","_inBundle":false,"_integrity":"sha512-+Z62OHOjA6k2sUDOKXoZI3EXv7Fb1K52jpTBLbkfx62bcUeSsrTBLhEquCRDKTx0XE5XbHcG/S2vrtE3lnEDsQ==","_location":"/is2","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"is2@2.0.6","name":"is2","escapedName":"is2","rawSpec":"2.0.6","saveSpec":null,"fetchSpec":"2.0.6"},"_requiredBy":["/tcp-port-used"],"_resolved":"https://registry.npmjs.org/is2/-/is2-2.0.6.tgz","_spec":"2.0.6","_where":"/Volumes/Users/marcel/Projects/Personal/cortex-debug/cortex-debug","author":{"name":"Enrico Marino","email":"enrico.marino@email.com"},"bugs":{"url":"http://github.com/stdarg/is/issues"},"dependencies":{"deep-is":"^0.1.3","ip-regex":"^4.1.0","is-url":"^1.2.4"},"description":"A type checking library where each exported function returns either true or false and does not throw. Also added tests.","devDependencies":{"mocha":"6.1.4","mongodb":"3.2.4"},"engines":{"node":">=v0.10.0"},"homepage":"http://github.com/stdarg/is2","keywords":["type","check","checker","checking","utilities","network","networking","credit","card","validation"],"license":"MIT","main":"./index.js","maintainers":"Edmond Meinfelder <edmond@stdarg.com>, Chris Oyler <christopher.oyler@gmail.com>","name":"is2","repository":{"type":"git","url":"git+ssh://git@github.com/stdarg/is2.git"},"scripts":{"test":"mocha -C --reporter list tests.js"},"tags":["type","check","checker","checking","utilities","network","networking","credit","card","validation"],"version":"2.0.6"}')},function(e,t){e.exports=function(e){if("string"!=typeof e)return!1;var t=e.match(r);if(!t)return!1;var o=t[1];if(!o)return!1;if(s.test(o)||n.test(o))return!0;return!1};var r=/^(?:\w+:)?\/\/(\S+)$/,s=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,n=/^[^\s\.]+\.\S{2,}$/},function(e,t,r){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(39):e.exports=r(41)},function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(18)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var r=1e3,s=6e4,n=60*s,o=24*n;function i(e,t,r,s){var n=t>=1.5*r;return Math.round(e/r)+" "+s+(n?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*n;case"minutes":case"minute":case"mins":case"min":case"m":return i*s;case"seconds":case"second":case"secs":case"sec":case"s":return i*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return i(e,t,o,"day");if(t>=n)return i(e,t,n,"hour");if(t>=s)return i(e,t,s,"minute");if(t>=r)return i(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=n)return Math.round(e/n)+"h";if(t>=s)return Math.round(e/s)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){const s=r(42),n=r(17);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:s,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),o=`  ${n};1m${s} [0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(43);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(18)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t,r){"use strict";const s=r(2),n=r(44),o=process.env;let i;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===i)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(e&&!e.isTTY&&!0!==i)return 0;const t=i?1:0;if("win32"===process.platform){const e=s.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e))}n("no-color")||n("no-colors")||n("color=false")?i=!1:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=!0),"FORCE_COLOR"in o&&(i=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,r){"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return-1!==s&&(-1===n||s<n)}},function(e,t,r){"use strict";var s=r(5).exec,n=r(5).execSync,o=r(3),i=r(1),a=o.access,u=o.accessSync,c=o.constants||o,l="win32"==process.platform,d=function(e,t,r){!function(e,t){a(e,c.F_OK,(function(e){t(!e)}))}(e,(function(n){if(n)!function(e,t){a(e,c.F_OK|c.X_OK,(function(e){t(null,!e)}))}(e,r);else s("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }",(function(e,t,s){r(null,!!t)}))}))},h=function(e,t){if(function(e){try{return u(e,c.F_OK),!1}catch(e){return!0}}(e))try{return!!n("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }")}catch(e){return!1}return function(e){try{return u(e,c.F_OK|c.X_OK),!0}catch(e){return!1}}(e)},p=function(e){return/[^A-Za-z0-9_\/:=-]/.test(e)&&(e=(e="'"+e.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),e};l&&(p=function(e){return/[\\]/.test(e)?'"'+i.dirname(e)+'"'+":"+('"'+i.basename(e)+'"'):'"'+e+'"'}),e.exports=function e(t,r){var n=p(t);if(!r&&"undefined"!=typeof Promise)return new Promise((function(r,s){e(t,(function(e,n){n?r(t):s(e)}))}));l?function(e,t,r){if(/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e))s("where "+t,(function(e){r(null,null===e)}));else r(null,!1)}(t,n,r):d(t,n,r)},e.exports.sync=function(e){var t=p(e);return l?function(e,t,r){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e))return!1;try{return!!n("where "+t,{stdio:[]})}catch(e){return!1}}(e,t):h(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expandValue=t.isExpandable=void 0;const s=r(6),n=/^([a-zA-Z_\-][a-zA-Z0-9_\-]*|\[\d+\])\s*=\s*/,o=/^[a-zA-Z_\-][a-zA-Z0-9_\-]*/,i=/^\<.+?\>/,a=/^(0x[0-9a-fA-F]+\s*)"/,u=/^0x[0-9a-fA-F]+/,c=/^0x0+\b/,l=/^(\d+) ['"]/,d=/^\d+(\.\d+)?/;t.isExpandable=function(e){let t;return 0===(e=e.trim()).length?0:e.startsWith("{...}")?2:"{"===e[0]?1:e.startsWith("true")||e.startsWith("false")||(t=c.exec(e))||(t=a.exec(e))?0:(t=u.exec(e))?2:((t=l.exec(e))||(t=d.exec(e))||(t=o.exec(e))||(t=i.exec(e)),0)},t.expandValue=function(e,t,r="",h){const p=()=>{if('"'!==(t=t.trim())[0]&&"'"!==t[0])return"";let e=1,r=!0;const s=t[0];let n=t.substr(1),o=!1;for(;r;)o?o=!1:"\\"===n[0]?o=!0:n[0]===s&&(r=!1),n=n.substr(1),e++;const i=t.substr(0,e).trim();return t=t.substr(e).trim(),i},f=[r];let m,g,b,v,y,C="";const S=e=>{let t="",r="";return f.push(e),f.forEach(e=>{if(r="",""!==e)if(e.startsWith("["))t+=e;else if(t){for(;e.startsWith("*");)r+="*",e=e.substr(1);t=t+"."+e}else t=e}),f.pop(),r+t};return m=()=>'"'===(t=t.trim())[0]?p():"{"===t[0]?(()=>{if("{"!==(t=t.trim())[0])return;if("}"===(t=t.substr(1).trim())[0])return t=t.substr(1).trim(),[];if(t.startsWith("...")&&"}"===(t=t.substr(3).trim())[0])return t=t.substr(1).trim(),"<...>";const e=t.indexOf("="),r=t.indexOf("{"),s=t.indexOf(",");let n=r;if(-1!==s&&s<r&&(n=s),-1!==n&&e>n||-1===e){const e=[];f.push("[0]");let r=m();f.pop(),e.push(y("[0]",r));let s=0;for(;;){if(f.push("["+ ++s+"]"),!(r=b())){f.pop();break}f.pop(),e.push(y("["+s+"]",r))}return t=t.substr(1).trim(),e}let o=v(!0);if(o){const e=[];for(e.push(o);o=g(!0);)e.push(o);return t=t.substr(1).trim(),e}})():(()=>{let e,r;return 0===(t=t.trim()).length?e=void 0:t.startsWith("true")?(e="true",t=t.substr(4).trim()):t.startsWith("false")?(e="false",t=t.substr(5).trim()):(r=c.exec(t))?(e="<nullptr>",t=t.substr(r[0].length).trim()):(r=a.exec(t))?(t=t.substr(r[1].length).trim(),e=p()):(r=u.exec(t))?(e="*"+r[0],t=t.substr(r[0].length).trim()):(r=l.exec(t))?(e=r[1],t=t.substr(r[0].length-1),e+=" "+p()):(r=d.exec(t))||(r=o.exec(t))||(r=i.exec(t))?(e=r[0],t=t.substr(r[0].length).trim()):e=t,e})(),v=(e=!1)=>{t=t.trim();const r=n.exec(t);if(!r)return;t=t.substr(r[0].length).trim();const s=C=r[1];e&&f.push(C);const o=m();return e&&f.pop(),y(s,o)},y=(t,r)=>{let n=0;return"object"==typeof r&&(n=e(r),r="Object"),"string"==typeof r&&r.startsWith("*0x")&&(h&&"1"===s.MINode.valueOf(h,"arg")?(n=e(S("*("+t),{arg:!0}),r="<args>"):(n=e(S("*"+t)),r="Object@"+r)),"string"==typeof r&&r.startsWith("<...>")&&(n=e(S(t)),r="..."),{name:t,value:r,variablesReference:n}},b=()=>{if(","===(t=t.trim())[0])return t=t.substr(1).trim(),m()},g=(e=!1)=>{if(","===(t=t.trim())[0])return t=t.substr(1).trim(),v(e)},t=t.trim(),m()}},function(e,t,r){"use strict";var s=r(48),n=r(3),o=r(1);function i(e,t){s.some(a(e),u,t)}function a(e){var t=process.env.PATH||"",r=process.env.PATHEXT||"";return t.replace(/["]+/g,"").split(o.delimiter).map((function(t){return r.split(o.delimiter).map((function(r){return o.join(t,e+r)}))})).reduce((function(e,t){return e.concat(t)}))}function u(e,t){n.stat(e,(function(e,r){if(e)return t(!1);t(r.isFile())}))}function c(e){try{return n.statSync(e).isFile()}catch(e){return!1}}e.exports=i,i.async=i,i.sync=function(e){return a(e).some(c)},i.all=function(e,t){s.every(e,i.async,t)},i.all.sync=function(e){return e.every(i.sync)},i.some=function(e,t){s.some(e,i.async,t)},i.some.sync=function(e){return e.some(i.sync)},i.first=function(e,t){s.detect(e,i.async,(function(e){t(e||!1)}))},i.first.sync=function(e){var t=e.filter(i.sync);return!!t.length&&t[0]},i.every=i.all,i.any=i.some},function(e,t,r){var s;
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */!function(){var r,n={};function o(){}function i(e){return e}function a(e){return!!e}function u(e){return!e}var c="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;function l(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function d(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=c&&(r=c.async),n.noConflict=function(){return c.async=r,n};var h=Object.prototype.toString,p=Array.isArray||function(e){return"[object Array]"===h.call(e)};function f(e){return p(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function m(e,t){for(var r=-1,s=e.length;++r<s;)t(e[r],r,e)}function g(e,t){for(var r=-1,s=e.length,n=Array(s);++r<s;)n[r]=t(e[r],r,e);return n}function b(e){return g(Array(e),(function(e,t){return t}))}function v(e,t,r){return m(e,(function(e,s,n){r=t(r,e,s,n)})),r}function y(e,t){m(S(e),(function(r){t(e[r],r)}))}function C(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}var S=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};function E(e){var t,r,s=-1;return f(e)?(t=e.length,function(){return++s<t?s:null}):(r=S(e),t=r.length,function(){return++s<t?r[s]:null})}function x(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),s=Array(r),n=0;n<r;n++)s[n]=arguments[n+t];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,arguments[0],s)}}}function R(e){return function(t,r,s){return e(t,s)}}var w="function"==typeof setImmediate&&setImmediate,O=w?function(e){w(e)}:function(e){setTimeout(e,0)};function P(e){return function(t,r,s){s=d(s||o);var n=E(t=t||[]);if(e<=0)return s(null);var i=!1,a=0,u=!1;!function o(){if(i&&a<=0)return s(null);for(;a<e&&!u;){var c=n();if(null===c)return i=!0,void(a<=0&&s(null));a+=1,r(t[c],c,l((function(e){a-=1,e?(s(e),u=!0):o()})))}}()}}function T(e){return function(t,r,s){return e(n.eachOf,t,r,s)}}function I(e){return function(t,r,s,n){return e(P(r),t,s,n)}}function M(e){return function(t,r,s){return e(n.eachOfSeries,t,r,s)}}function F(e,t,r,s){s=d(s||o);var n=f(t=t||[])?[]:{};e(t,(function(e,t,s){r(e,(function(e,r){n[t]=r,s(e)}))}),(function(e){s(e,n)}))}function D(e,t,r,s){var n=[];e(t,(function(e,t,s){r(e,(function(r){r&&n.push({index:t,value:e}),s()}))}),(function(){s(g(n.sort((function(e,t){return e.index-t.index})),(function(e){return e.value})))}))}function A(e,t,r,s){D(e,t,(function(e,t){r(e,(function(e){t(!e)}))}),s)}function L(e,t,r){return function(s,n,o,i){function a(){i&&i(r(!1,void 0))}function u(e,s,n){if(!i)return n();o(e,(function(s){i&&t(s)&&(i(r(!0,e)),i=o=!1),n()}))}arguments.length>3?e(s,n,u,a):(i=o,o=n,e(s,u,a))}}function k(e,t){return t}function _(e,t,r){r=r||o;var s=f(t)?[]:{};e(t,(function(e,t,r){e(x((function(e,n){n.length<=1&&(n=n[0]),s[t]=n,r(e)})))}),(function(e){r(e,s)}))}function N(e,t,r,s){var n=[];e(t,(function(e,t,s){r(e,(function(e,t){n=n.concat(t||[]),s(e)}))}),(function(e){s(e,n)}))}function j(e,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function s(e,t,r,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(e.started=!0,p(t)||(t=[t]),0===t.length&&e.idle())return n.setImmediate((function(){e.drain()}));m(t,(function(t){var n={data:t,callback:s||o};r?e.tasks.unshift(n):e.tasks.push(n),e.tasks.length===e.concurrency&&e.saturated()})),n.setImmediate(e.process)}function i(e,t){return function(){a-=1;var r=!1,s=arguments;m(t,(function(e){m(u,(function(t,s){t!==e||r||(u.splice(s,1),r=!0)})),e.callback.apply(e,s)})),e.tasks.length+a===0&&e.drain(),e.process()}}var a=0,u=[],c={tasks:[],concurrency:t,payload:r,saturated:o,empty:o,drain:o,started:!1,paused:!1,push:function(e,t){s(c,e,!1,t)},kill:function(){c.drain=o,c.tasks=[]},unshift:function(e,t){s(c,e,!0,t)},process:function(){for(;!c.paused&&a<c.concurrency&&c.tasks.length;){var t=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),r=g(t,(function(e){return e.data}));0===c.tasks.length&&c.empty(),a+=1,u.push(t[0]);var s=l(i(c,t));e(r,s)}},length:function(){return c.tasks.length},running:function(){return a},workersList:function(){return u},idle:function(){return c.tasks.length+a===0},pause:function(){c.paused=!0},resume:function(){if(!1!==c.paused){c.paused=!1;for(var e=Math.min(c.concurrency,c.tasks.length),t=1;t<=e;t++)n.setImmediate(c.process)}}};return c}function q(e){return x((function(t,r){t.apply(null,r.concat([x((function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&m(r,(function(t){console[e](t)})))}))]))}))}function $(e){return function(t,r,s){e(b(t),r,s)}}function B(e){return x((function(t,r){var s=x((function(r){var s=this,n=r.pop();return e(t,(function(e,t,n){e.apply(s,r.concat([n]))}),n)}));return r.length?s.apply(this,r):s}))}function U(e){return x((function(t){var r=t.pop();t.push((function(){var e=arguments;s?n.setImmediate((function(){r.apply(null,e)})):r.apply(null,e)}));var s=!0;e.apply(this,t),s=!1}))}"object"==typeof process&&"function"==typeof process.nextTick?n.nextTick=process.nextTick:n.nextTick=O,n.setImmediate=w?O:n.nextTick,n.forEach=n.each=function(e,t,r){return n.eachOf(e,R(t),r)},n.forEachSeries=n.eachSeries=function(e,t,r){return n.eachOfSeries(e,R(t),r)},n.forEachLimit=n.eachLimit=function(e,t,r,s){return P(t)(e,R(r),s)},n.forEachOf=n.eachOf=function(e,t,r){r=d(r||o);for(var s,n=E(e=e||[]),i=0;null!=(s=n());)i+=1,t(e[s],s,l(a));function a(e){i--,e?r(e):null===s&&i<=0&&r(null)}0===i&&r(null)},n.forEachOfSeries=n.eachOfSeries=function(e,t,r){r=d(r||o);var s=E(e=e||[]),i=s();!function o(){var a=!0;if(null===i)return r(null);t(e[i],i,l((function(e){if(e)r(e);else{if(null===(i=s()))return r(null);a?n.setImmediate(o):o()}}))),a=!1}()},n.forEachOfLimit=n.eachOfLimit=function(e,t,r,s){P(t)(e,r,s)},n.map=T(F),n.mapSeries=M(F),n.mapLimit=I(F),n.inject=n.foldl=n.reduce=function(e,t,r,s){n.eachOfSeries(e,(function(e,s,n){r(t,e,(function(e,r){t=r,n(e)}))}),(function(e){s(e,t)}))},n.foldr=n.reduceRight=function(e,t,r,s){var o=g(e,i).reverse();n.reduce(o,t,r,s)},n.transform=function(e,t,r,s){3===arguments.length&&(s=r,r=t,t=p(e)?[]:{}),n.eachOf(e,(function(e,s,n){r(t,e,s,n)}),(function(e){s(e,t)}))},n.select=n.filter=T(D),n.selectLimit=n.filterLimit=I(D),n.selectSeries=n.filterSeries=M(D),n.reject=T(A),n.rejectLimit=I(A),n.rejectSeries=M(A),n.any=n.some=L(n.eachOf,a,i),n.someLimit=L(n.eachOfLimit,a,i),n.all=n.every=L(n.eachOf,u,u),n.everyLimit=L(n.eachOfLimit,u,u),n.detect=L(n.eachOf,i,k),n.detectSeries=L(n.eachOfSeries,i,k),n.detectLimit=L(n.eachOfLimit,i,k),n.sortBy=function(e,t,r){function s(e,t){var r=e.criteria,s=t.criteria;return r<s?-1:r>s?1:0}n.map(e,(function(e,r){t(e,(function(t,s){t?r(t):r(null,{value:e,criteria:s})}))}),(function(e,t){if(e)return r(e);r(null,g(t.sort(s),(function(e){return e.value})))}))},n.auto=function(e,t,r){"function"==typeof arguments[1]&&(r=t,t=null),r=d(r||o);var s=S(e),i=s.length;if(!i)return r(null);t||(t=i);var a={},u=0,c=!1,l=[];function h(e){l.unshift(e)}function f(e){var t=C(l,e);t>=0&&l.splice(t,1)}function g(){i--,m(l.slice(0),(function(e){e()}))}h((function(){i||r(null,a)})),m(s,(function(s){if(!c){for(var o,i=p(e[s])?e[s]:[e[s]],l=x((function(e,t){if(u--,t.length<=1&&(t=t[0]),e){var o={};y(a,(function(e,t){o[t]=e})),o[s]=t,c=!0,r(e,o)}else a[s]=t,n.setImmediate(g)})),d=i.slice(0,i.length-1),m=d.length;m--;){if(!(o=e[d[m]]))throw new Error("Has nonexistent dependency in "+d.join(", "));if(p(o)&&C(o,s)>=0)throw new Error("Has cyclic dependencies")}b()?(u++,i[i.length-1](l,a)):h((function e(){b()&&(u++,f(e),i[i.length-1](l,a))}))}function b(){return u<t&&v(d,(function(e,t){return e&&a.hasOwnProperty(t)}),!0)&&!a.hasOwnProperty(s)}}))},n.retry=function(e,t,r){var s=5,o=0,i=[],a={times:s,interval:o};function u(e,t){if("number"==typeof t)e.times=parseInt(t,10)||s;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||s,e.interval=parseInt(t.interval,10)||o}}var c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function l(e,t){function r(e,r){return function(s){e((function(e,t){s(!e||r,{err:e,result:t})}),t)}}function s(e){return function(t){setTimeout((function(){t(null)}),e)}}for(;a.times;){var o=!(a.times-=1);i.push(r(a.task,o)),!o&&a.interval>0&&i.push(s(a.interval))}n.series(i,(function(t,r){r=r[r.length-1],(e||a.callback)(r.err,r.result)}))}return c<=2&&"function"==typeof e&&(r=t,t=e),"function"!=typeof e&&u(a,e),a.callback=r,a.task=t,a.callback?l():l},n.waterfall=function(e,t){if(t=d(t||o),!p(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();!function e(r){return x((function(s,n){if(s)t.apply(null,[s].concat(n));else{var o=r.next();o?n.push(e(o)):n.push(t),U(r).apply(null,n)}}))}(n.iterator(e))()},n.parallel=function(e,t){_(n.eachOf,e,t)},n.parallelLimit=function(e,t,r){_(P(t),e,r)},n.series=function(e,t){_(n.eachOfSeries,e,t)},n.iterator=function(e){return function t(r){function s(){return e.length&&e[r].apply(null,arguments),s.next()}return s.next=function(){return r<e.length-1?t(r+1):null},s}(0)},n.apply=x((function(e,t){return x((function(r){return e.apply(null,t.concat(r))}))})),n.concat=T(N),n.concatSeries=M(N),n.whilst=function(e,t,r){if(r=r||o,e()){var s=x((function(n,o){n?r(n):e.apply(this,o)?t(s):r.apply(null,[null].concat(o))}));t(s)}else r(null)},n.doWhilst=function(e,t,r){var s=0;return n.whilst((function(){return++s<=1||t.apply(this,arguments)}),e,r)},n.until=function(e,t,r){return n.whilst((function(){return!e.apply(this,arguments)}),t,r)},n.doUntil=function(e,t,r){return n.doWhilst(e,(function(){return!t.apply(this,arguments)}),r)},n.during=function(e,t,r){r=r||o;var s=x((function(t,s){t?r(t):(s.push(n),e.apply(this,s))})),n=function(e,n){e?r(e):n?t(s):r(null)};e(n)},n.doDuring=function(e,t,r){var s=0;n.during((function(e){s++<1?e(null,!0):t.apply(this,arguments)}),e,r)},n.queue=function(e,t){return j((function(t,r){e(t[0],r)}),t,1)},n.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}var s=n.queue(e,t);return s.push=function(e,t,i){!function(e,t,s,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(e.started=!0,p(t)||(t=[t]),0===t.length)return n.setImmediate((function(){e.drain()}));m(t,(function(t){var a={data:t,priority:s,callback:"function"==typeof i?i:o};e.tasks.splice(function(e,t,r){for(var s=-1,n=e.length-1;s<n;){var o=s+(n-s+1>>>1);r(t,e[o])>=0?s=o:n=o-1}return s}(e.tasks,a,r)+1,0,a),e.tasks.length===e.concurrency&&e.saturated(),n.setImmediate(e.process)}))}(s,e,t,i)},delete s.unshift,s},n.cargo=function(e,t){return j(e,1,t)},n.log=q("log"),n.dir=q("dir"),n.memoize=function(e,t){var r={},s={},o=Object.prototype.hasOwnProperty;t=t||i;var a=x((function(i){var a=i.pop(),u=t.apply(null,i);o.call(r,u)?n.setImmediate((function(){a.apply(null,r[u])})):o.call(s,u)?s[u].push(a):(s[u]=[a],e.apply(null,i.concat([x((function(e){r[u]=e;var t=s[u];delete s[u];for(var n=0,o=t.length;n<o;n++)t[n].apply(null,e)}))])))}));return a.memo=r,a.unmemoized=e,a},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},n.times=$(n.map),n.timesSeries=$(n.mapSeries),n.timesLimit=function(e,t,r,s){return n.mapLimit(b(e),t,r,s)},n.seq=function(){var e=arguments;return x((function(t){var r=this,s=t[t.length-1];"function"==typeof s?t.pop():s=o,n.reduce(e,t,(function(e,t,s){t.apply(r,e.concat([x((function(e,t){s(e,t)}))]))}),(function(e,t){s.apply(r,[e].concat(t))}))}))},n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))},n.applyEach=B(n.eachOf),n.applyEachSeries=B(n.eachOfSeries),n.forever=function(e,t){var r=l(t||o),s=U(e);!function e(t){if(t)return r(t);s(e)}()},n.ensureAsync=U,n.constant=x((function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}})),n.wrapSync=n.asyncify=function(e){return x((function(t){var r,s,n,o=t.pop();try{r=e.apply(this,t)}catch(e){return o(e)}("function"===(n=typeof(s=r))||"object"===n&&s)&&"function"==typeof r.then?r.then((function(e){o(null,e)})).catch((function(e){o(e.message?e:new Error(e))})):o(null,r)}))},e.exports?e.exports=n:void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JLinkServerController=void 0;const s=r(4),n=r(2),o=r(0),i=r(7).sync,a=["JLinkGDBServerCLExe","JLinkGDBServerCL","JLinkGDBServer"];class u extends o.EventEmitter{constructor(){super(),this.portsNeeded=["gdbPort","swoPort","consolePort"]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return['interpreter-exec console "monitor halt"','interpreter-exec console "monitor reset"',"target-download",'interpreter-exec console "monitor reset"',"enable-pretty-printing"]}attachCommands(){return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor halt"','interpreter-exec console "monitor reset"']}swoCommands(){const e=[];if(this.args.swoConfig.enabled){const t=this.SWOConfigurationCommands();e.push(...t)}return e}SWOConfigurationCommands(){const e="0x"+s.calculatePortMask(this.args.swoConfig.decoders).toString(16),t=0|this.args.swoConfig.swoFrequency,r=[`monitor SWO EnableTarget ${0|this.args.swoConfig.cpuFrequency} ${t} ${e} 0`,"DisableITMPorts 0xFFFFFFFF","EnableITMPorts "+e,"EnableDWTSync","ITMSyncEnable"];return r.push(this.args.swoConfig.profile?"EnablePCSample":"DisablePCSample"),r.map(e=>`interpreter-exec console "${e}"`)}serverExecutable(){if(this.args.serverpath)return this.args.serverpath;if("win32"===n.platform())return"JLinkGDBServerCL.exe";for(const e in a)if(i(e))return e;return"JLinkGDBServer"}serverArguments(){const e=this.ports.gdbPort,t=this.ports.swoPort,r=this.ports.consolePort;let s=["-if",this.args.interface,"-port",e.toString(),"-swoport",t.toString(),"-telnetport",r.toString(),"-device",this.args.device];return this.args.serialNumber?s.push("-select","usb="+this.args.serialNumber):this.args.ipAddress&&s.push("-select","ip="+this.args.ipAddress),this.args.rtos&&s.push("-rtos",this.args.rtos),this.args.jlinkscript&&s.push("-jlinkscriptfile",this.args.jlinkscript),this.args.serverArgs&&(s=s.concat(this.args.serverArgs)),s}initMatch(){return/Waiting for GDB connection\.\.\./g}serverLaunchStarted(){}serverLaunchCompleted(){if(this.args.swoConfig.enabled)if("probe"===this.args.swoConfig.source){const e=s.createPortName(this.args.targetProcessor,"swoPort");this.emit("event",new s.SWOConfigureEvent({type:"socket",port:this.ports[e]}))}else this.emit("event",new s.SWOConfigureEvent({type:"serial",device:this.args.swoConfig.source,baudRate:this.args.swoConfig.swoFrequency}))}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.JLinkServerController=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenOCDServerController=void 0;const s=r(4),n=r(2),o=r(19),i=r(3),a=r(5),u=r(0);class c extends u.EventEmitter{constructor(){super(),this.portsNeeded=["gdbPort"],this.name="OpenOCD",this.swoPath=o.tmpNameSync()}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return['interpreter-exec console "monitor reset halt"',"target-download",'interpreter-exec console "monitor reset halt"',"enable-pretty-printing"]}attachCommands(){return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor reset halt"']}swoCommands(){const e=[];if(this.args.swoConfig.enabled){const t=this.SWOConfigurationCommands();e.push(...t)}return e}SWOConfigurationCommands(){const e="0x"+s.calculatePortMask(this.args.swoConfig.decoders).toString(16),t=this.args.swoConfig.swoFrequency,r=this.args.swoConfig.cpuFrequency,n=["EnableITMAccess","BaseSWOSetup "+(Math.floor(r/t)-1),"SetITMId 1","ITMDWTTransferEnable","DisableITMPorts 0xFFFFFFFF","EnableITMPorts "+e,"EnableDWTSync","ITMSyncEnable","ITMGlobalEnable"];return n.push(this.args.swoConfig.profile?"EnablePCSample":"DisablePCSample"),n.map(e=>`interpreter-exec console "${e}"`)}serverExecutable(){return this.args.serverpath?this.args.serverpath:"win32"===n.platform()?"openocd.exe":"openocd"}serverArguments(){const e=this.ports.gdbPort;let t=[];t.push("-c","gdb_port "+e),this.args.searchDir.forEach((e,r)=>{t.push("-s",e)}),0===this.args.searchDir.length&&t.push("-s",this.args.cwd);for(const e of this.args.openOCDPreConfigLaunchCommands||[])t.push("-c",e);if(this.args.configFiles.forEach((e,r)=>{t.push("-f",e)}),this.args.rtos){const e=o.tmpNameSync();i.writeFileSync(e,`$_TARGETNAME configure -rtos ${this.args.rtos}\n`,"utf8"),t.push("-f",e)}this.args.serverArgs&&(t=t.concat(this.args.serverArgs));const r=[];if(this.args.swoConfig.enabled){let e;"win32"===n.platform()&&(this.swoPath=this.swoPath.replace(/\\/g,"/")),e="probe"===this.args.swoConfig.source?"internal "+this.swoPath:"external",r.push(`tpiu config ${e} uart off ${this.args.swoConfig.cpuFrequency} ${this.args.swoConfig.swoFrequency}`)}r.length>0&&t.push("-c",r.join("; "));for(const e of this.args.openOCDLaunchCommands||[])t.push("-c",e);return t}initMatch(){return/Info\s:[^\n]*Listening on port \d+ for gdb connection/i}serverLaunchStarted(){if(this.args.swoConfig.enabled&&"probe"===this.args.swoConfig.source&&"win32"!==n.platform()){a.spawnSync("mkfifo",[this.swoPath]);this.emit("event",new s.SWOConfigureEvent({type:"fifo",path:this.swoPath}))}}serverLaunchCompleted(){this.args.swoConfig.enabled&&("probe"===this.args.swoConfig.source&&"win32"===n.platform()?this.emit("event",new s.SWOConfigureEvent({type:"file",path:this.swoPath})):"probe"!==this.args.swoConfig.source&&this.emit("event",new s.SWOConfigureEvent({type:"serial",device:this.args.swoConfig.source,baudRate:this.args.swoConfig.swoFrequency})))}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.OpenOCDServerController=c},function(e,t,r){"use strict";var s="win32"===process.platform,n=s?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=s?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",n.test(e)&&(e=e.slice(0,-1)),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STUtilServerController=void 0;const s=r(4),n=r(2),o=r(0);class i extends o.EventEmitter{constructor(){super(),this.name="ST-Util",this.portsNeeded=["gdbPort"]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return['interpreter-exec console "monitor halt"','interpreter-exec console "monitor reset"',"target-download",'interpreter-exec console "monitor reset"',"enable-pretty-printing"]}attachCommands(){return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor halt"','interpreter-exec console "monitor reset"']}swoCommands(){const e=[];if(this.args.swoConfig.enabled&&"probe"!==this.args.swoConfig.source){const t=this.SWOConfigurationCommands();e.push(...t)}return e}SWOConfigurationCommands(){const e="0x"+s.calculatePortMask(this.args.swoConfig.decoders).toString(16),t=this.args.swoConfig.swoFrequency,r=this.args.swoConfig.cpuFrequency,n=["EnableITMAccess","BaseSWOSetup "+(Math.floor(r/t)-1),"SetITMId 1","ITMDWTTransferEnable","DisableITMPorts 0xFFFFFFFF","EnableITMPorts "+e,"EnableDWTSync","ITMSyncEnable","ITMGlobalEnable"];return n.push(this.args.swoConfig.profile?"EnablePCSample":"DisablePCSample"),n.map(e=>`interpreter-exec console "${e}"`)}serverExecutable(){return this.args.serverpath?this.args.serverpath:"win32"===n.platform()?"st-util.exe":"st-util"}serverArguments(){let e=["-p",this.ports.gdbPort.toString(),"-v","--no-reset"];return this.args.v1&&e.push("--stlinkv1"),this.args.serverArgs&&(e=e.concat(this.args.serverArgs)),e}initMatch(){return/Listening at \*/g}serverLaunchStarted(){}serverLaunchCompleted(){this.args.swoConfig.enabled&&"probe"!==this.args.swoConfig.source&&this.emit("event",new s.SWOConfigureEvent({type:"serial",device:this.args.swoConfig.source,baudRate:this.args.swoConfig.swoFrequency}))}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.STUtilServerController=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STLinkServerController=void 0;const s=r(4),n=r(2),o=r(1),i=r(3),a=r(0),u="win32"===n.platform()?"c:\\ST":"darwin"===n.platform()?"/Applications/STM32CubeIDE.app/Contents/Eclipse":"/opt/st",c="win32"===n.platform()?"ST-LINK_gdbserver.exe":"ST-LINK_gdbserver",l=/^STM32CubeIDE_(.+)$/,d=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.stlink-gdb-server\.(.+)/,h=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.cubeprogrammer\.(.+)/,p=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.gnu-tools-for-stm32\.(.+)/;function f(e,t,r,s=""){const n=o.join(...e);let a;try{for(const e of i.readdirSync(n).sort()){const u=o.join(n,e);if(!i.statSync(u).isDirectory())continue;const c=e.match(t);if(c){const e=o.join(n,c[0],r,s);i.existsSync(e)&&(a=e)}}}catch(e){}return a||s}class m extends a.EventEmitter{constructor(){super(),this.name="ST-LINK",this.portsNeeded=["gdbPort"]}static getSTMCubeIdeDir(){return"darwin"===n.platform()?u:f([u],l,"STM32CubeIDE")}static getArmToolchainPath(){return f([this.getSTMCubeIdeDir(),"plugins"],p,"tools/bin")}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return['interpreter-exec console "monitor reset halt"',"target-download",'interpreter-exec console "monitor reset halt"',"enable-pretty-printing"]}attachCommands(){return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor reset halt"']}swoCommands(){return[]}serverExecutable(){return this.args.serverpath?this.args.serverpath:f([m.getSTMCubeIdeDir(),"plugins"],d,"tools/bin",c)}serverArguments(){let e=["-p",this.ports.gdbPort.toString()];if(this.args.stm32cubeprogrammer)e.push("-cp",this.args.stm32cubeprogrammer);else{let t=f([m.getSTMCubeIdeDir(),"plugins"],h,"tools/bin");t||(t="win32"===n.platform()?process.env.ProgramFiles+"\\STMicroelectronics\\STM32Cube\\STM32CubeProgrammer\\bin":"darwin"===n.platform()?"/Applications/STMicroelectronics/STM32Cube/STM32CubeProgrammer/STM32CubeProgrammer.app/Contents/MacOs/bin":"/usr/local/STMicroelectronics/STM32Cube/STM32CubeProgrammer/bin"),e.push("-cp",t)}return"jtag"!==this.args.interface&&e.push("--swd"),this.args.serialNumber&&e.push("--serial-number",this.args.serialNumber),this.args.serverArgs&&(e=e.concat(this.args.serverArgs)),e}initMatch(){return/Listening at \*/g}serverLaunchStarted(){}serverLaunchCompleted(){}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.STLinkServerController=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PyOCDServerController=void 0;const s=r(4),n=r(0);class o extends n.EventEmitter{constructor(){super(),this.name="PyOCD",this.portsNeeded=["gdbPort","consolePort"]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return['interpreter-exec console "monitor reset halt"',"target-download",'interpreter-exec console "monitor reset halt"',"enable-pretty-printing"]}attachCommands(){this.ports.gdbPort;return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor reset"']}swoCommands(){const e=[];if(this.args.swoConfig.enabled&&"probe"!==this.args.swoConfig.source){const t=this.SWOConfigurationCommands();e.push(...t)}return e}SWOConfigurationCommands(){const e="0x"+s.calculatePortMask(this.args.swoConfig.decoders).toString(16),t=this.args.swoConfig.swoFrequency,r=this.args.swoConfig.cpuFrequency,n=["EnableITMAccess","BaseSWOSetup "+(Math.floor(r/t)-1),"SetITMId 1","ITMDWTTransferEnable","DisableITMPorts 0xFFFFFFFF","EnableITMPorts "+e,"EnableDWTSync","ITMSyncEnable","ITMGlobalEnable"];return n.push(this.args.swoConfig.profile?"EnablePCSample":"DisablePCSample"),n.map(e=>`interpreter-exec console "${e}"`)}serverExecutable(){return this.args.serverpath?this.args.serverpath:"pyocd-gdbserver"}serverArguments(){const e=this.ports.gdbPort,t=this.ports.consolePort;let r=["--persist","--port",e.toString(),"--telnet-port",t.toString()];return this.args.boardId&&(r.push("--board"),r.push(this.args.boardId)),this.args.targetId&&(r.push("--target"),r.push(this.args.targetId.toString())),this.args.cmsisPack&&(r.push("--pack"),r.push(this.args.cmsisPack.toString())),this.args.serverArgs&&(r=r.concat(this.args.serverArgs)),r}initMatch(){return/GDB server started (at|on) port/}serverLaunchStarted(){}serverLaunchCompleted(){this.args.swoConfig.enabled&&"probe"!==this.args.swoConfig.source&&this.emit("event",new s.SWOConfigureEvent({type:"serial",device:this.args.swoConfig.source,baudRate:this.args.swoConfig.swoFrequency}))}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.PyOCDServerController=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BMPServerController=void 0;const s=r(4),n=r(0);class o extends n.EventEmitter{constructor(){super(),this.name="BMP",this.portsNeeded=[]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){const e=["target-select extended-remote "+this.args.BMPGDBSerialPort];return"enable"===this.args.powerOverBMP?(e.push('interpreter-exec console "monitor tpwr enable"'),e.push('interpreter-exec console "shell sleep 0.1"')):"disable"===this.args.powerOverBMP&&e.push('interpreter-exec console "monitor tpwr disable"'),"jtag"===this.args.interface?e.push('interpreter-exec console "monitor jtag_scan"'):e.push('interpreter-exec console "monitor swdp_scan"'),e.push(`interpreter-exec console "attach ${this.args.targetId}"`,'interpreter-exec console "set mem inaccessible-by-default off"'),e}launchCommands(){return["target-download",'interpreter-exec console "SoftwareReset"',"enable-pretty-printing"]}attachCommands(){return["enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "SoftwareReset"']}swoCommands(){const e=[];if(this.args.swoConfig.enabled){const t=this.SWOConfigurationCommands();e.push(...t)}return e}SWOConfigurationCommands(){const e="0x"+s.calculatePortMask(this.args.swoConfig.decoders).toString(16),t=this.args.swoConfig.swoFrequency,r=this.args.swoConfig.cpuFrequency,n=Math.floor(r/t)-1,o=[];return o.push("EnableITMAccess","BaseSWOSetup "+n,"SetITMId 1","ITMDWTTransferEnable","DisableITMPorts 0xFFFFFFFF","EnableITMPorts "+e,"EnableDWTSync","ITMSyncEnable","ITMGlobalEnable"),o.push(this.args.swoConfig.profile?"EnablePCSample":"DisablePCSample"),o.map(e=>`interpreter-exec console "${e}"`)}serverExecutable(){return null}serverArguments(){return[]}initMatch(){return null}serverLaunchStarted(){}serverLaunchCompleted(){this.args.swoConfig.enabled&&"probe"!==this.args.swoConfig.source&&this.emit("event",new s.SWOConfigureEvent({type:"serial",device:this.args.swoConfig.source,baudRate:this.args.swoConfig.swoFrequency}))}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.BMPServerController=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PEServerController=void 0;const s=r(4),n=r(2),o=r(0);r(7).sync;class i extends o.EventEmitter{constructor(){super(),this.portsNeeded=["gdbPort","swoPort","consolePort"]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return['interpreter-exec console "monitor _reset"',"target-download",'interpreter-exec console "monitor _reset"',"enable-pretty-printing"]}attachCommands(){return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor _reset"']}swoCommands(){return[]}serverExecutable(){return console.log("Getting Exec"),this.args.serverpath?this.args.serverpath:"win32"===n.platform()?"pegdbserver_console.exe":"pegdbserver_console"}serverArguments(){const e=this.ports.gdbPort;let t=[];return t.push("-startserver"),t.push("-singlesession"),t.push("-device="+this.args.device),t.push("-serverport="+e),this.args.ipAddress&&t.push("-serverip="+this.args.ipAddress),this.args.rtos&&t.push("-kernal="+this.args.rtos),this.args.interface&&t.push("-interface="+this.args.interface),this.args.configFiles&&t.push("-configfile="+this.args.configFiles[0]),this.args.serverArgs&&(t=t.concat(this.args.serverArgs)),t}initMatch(){return/All Servers Running/g}serverLaunchStarted(){}serverLaunchCompleted(){}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.PEServerController=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QEMUServerController=void 0;const s=r(4),n=r(0),o=r(7).sync,i=["qemu-system-arm"];class a extends n.EventEmitter{constructor(){super(),this.portsNeeded=["gdbPort"]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote localhost:"+this.ports[s.createPortName(this.args.targetProcessor)]]}launchCommands(){return["enable-pretty-printing"]}attachCommands(){return["enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor stop"','interpreter-exec console "monitor system_reset"']}swoCommands(){return[]}serverExecutable(){if(this.args.serverpath)return this.args.serverpath;for(const e in i)if(o(e))return e;return"qemu-system-arm"}serverArguments(){const e=this.ports.gdbPort;let t=["-cpu",this.args.cpu,"-machine",this.args.machine,"-nographic","-semihosting-config","enable=on,target=native","-gdb","tcp::"+e.toString(),"-S","-kernel",this.args.executable];return this.args.serverArgs&&(t=t.concat(this.args.serverArgs)),t}initMatch(){return null}serverLaunchStarted(){}serverLaunchCompleted(){}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.QEMUServerController=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalServerController=void 0;const s=r(0);class n extends s.EventEmitter{constructor(){super(),this.name="External",this.portsNeeded=[]}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return["target-select extended-remote "+this.args.gdbTarget]}launchCommands(){return['interpreter-exec console "monitor reset halt"',"target-download",'interpreter-exec console "monitor reset halt"',"enable-pretty-printing"]}attachCommands(){return['interpreter-exec console "monitor halt"',"enable-pretty-printing"]}swoCommands(){return[]}restartCommands(){return['interpreter-exec console "monitor reset halt"']}serverExecutable(){return null}serverArguments(){return[]}initMatch(){return null}serverLaunchStarted(){}serverLaunchCompleted(){}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.ExternalServerController=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolTable=void 0;const s=r(5),n=r(2),o=r(1),i=r(19),a=r(3),u=r(12),c=r(20),l=/\n([0-9a-f]{8})\s([lg\ !])([w\ ])([C\ ])([W\ ])([I\ ])([dD\ ])([FfO\ ])\s(.*?)\s+([0-9a-f]+)\s([^\r\n]+)/gm,d=/\n <0>.*\(DW_TAG_compile_unit\)[\s\S]*?DW_AT_name[\s]*: (\(.*\):\s)?(.*)[\r\n]+([\s\S]*?)\n </gm,h=/DW_AT_comp_dir[\s]*: (\(.*\):\s)?(.*)[\r\n]+/m,p={F:c.SymbolType.Function,f:c.SymbolType.File,O:c.SymbolType.Object," ":c.SymbolType.Normal},f={l:c.SymbolScope.Local,g:c.SymbolScope.Global," ":c.SymbolScope.Neither,"!":c.SymbolScope.Both};class m{constructor(e,t,r,s){this.toolchainPath=e,this.toolchainPrefix=t,this.executable=r,this.demangle=s,this.allSymbols=[],this.staticsByFile={},this.globalVars=[],this.globalFuncsMap={},this.staticVars=[],this.staticFuncsMap={},this.fileMap={}}loadSymbols(){try{let e="win32"!==n.platform()?this.toolchainPrefix+"-objdump":this.toolchainPrefix+"-objdump.exe";this.toolchainPath&&(e=o.normalize(o.join(this.toolchainPath,e)));const t=this.deSerializeFileMaps(this.executable),r=["--syms"];t||r.push("-Wi"),this.demangle&&r.push("-C");const u=i.tmpNameSync(),d=a.openSync(u,"w");s.spawnSync(e,[...r,this.executable],{stdio:["ignore",d,"ignore"]});a.closeSync(d);const h=this.readLinesAndFileMaps(u,!t),g=RegExp(l);let b,v=null;for(;null!==(b=g.exec(h));){"d"===b[7]&&"f"===b[8]&&(v=b[11]?m.NormalizePath(b[11].trim()):null);const e=p[b[8]],t=f[b[2]];let r=b[11].trim(),s=!1;r.startsWith(".hidden")&&(r=r.substring(7).trim(),s=!0);const n={address:parseInt(b[1],16),type:e,scope:t,section:b[9].trim(),length:parseInt(b[10],16),name:r,file:t===c.SymbolScope.Local?v:null,instructions:null,hidden:s};this.allSymbols.push(n)}this.categorizeSymbols(),t||this.serializeFileMaps(this.executable)}catch(e){}}categorizeSymbols(){for(const e of this.allSymbols){const t=e.scope,r=e.type;if(t!==c.SymbolScope.Local)r===c.SymbolType.Function?(e.scope=c.SymbolScope.Global,this.globalFuncsMap[e.name]=e):r===c.SymbolType.Object&&t===c.SymbolScope.Global&&this.globalVars.push(e);else if(e.file){if(r===c.SymbolType.Object)this.staticVars.push(e);else if(r===c.SymbolType.Function){const t=this.staticFuncsMap[e.name];t?t.push(e):this.staticFuncsMap[e.name]=[e]}}else r===c.SymbolType.Function?(e.scope=c.SymbolScope.Global,this.globalFuncsMap[e.name]=e):c.SymbolType.Object}}printSyms(e){e=e||console.log;for(const t of this.allSymbols){let r=t.name;if(t.type===c.SymbolType.Function?r+=" (f)":t.type===c.SymbolType.Object&&(r+=" (o)"),t.file&&(r+=" (s)"),e(r),t.file){const r=this.fileMap[t.file];if(r)for(const t of r)e("\t"+t);else e("\tNoMap for? "+t.file)}}}printToFile(e){try{const t=a.openSync(e,"w");this.printSyms(e=>{a.writeSync(t,e),a.writeSync(t,"\n")}),a.closeSync(t)}catch(e){console.log("printSymsToFile: failed"+e)}}addToFileMap(e,t){t=m.NormalizePath(t);const r=this.fileMap[e]||[];return-1===r.indexOf(t)&&r.push(t),this.fileMap[e]=r,r}readLinesAndFileMaps(e,t){try{const r=Date.now();let s=a.readFileSync(e,{encoding:"utf8"});if(t){let e,t=0,r=s.length;const n=RegExp(d);for(;null!==(e=n.exec(s));){r>e.index&&(r=e.index);const s=m.NormalizePath(e[2]),n=o.basename(s);this.addToFileMap(n,n),this.addToFileMap(n,s);e=RegExp(h).exec(e[3]),e&&this.addToFileMap(n,e[2]+"/"+s),t++}Date.now();0,r!==s.length&&(s=s.substring(0,r))}return s}catch(e){return""}}static createFileHash(e){try{e=m.NormalizePath(e);const t=`${e}-${a.statSync(e).mtimeMs}-${n.userInfo().username}-v${m.schemaVer}`,r=u.createHash("sha256");r.update(t);return r.digest("hex")}catch(e){throw e}}static createFileMapCacheFileName(e){const t=m.createFileHash(e)+".json";return o.join(n.tmpdir(),"Cortex-Debug-"+t)}serializeFileMaps(e){try{const t=m.createFileMapCacheFileName(e),r=JSON.stringify(this.fileMap,null," ");a.writeFileSync(t,r,{encoding:"utf8"})}catch(e){console.log(e.toString())}}deSerializeFileMaps(e){try{const t=m.createFileMapCacheFileName(e);if(!a.existsSync(t))return!1;const r=a.readFileSync(t,{encoding:"utf8"});this.fileMap=JSON.parse(r);try{const e=Date.now();a.utimesSync(t,e,e)}catch(e){}return!0}catch(e){return!1}}getFunctionAtAddress(e){return this.allSymbols.find(t=>t.type===c.SymbolType.Function&&t.address<=e&&t.address+t.length>e)}getFunctionSymbols(){return this.allSymbols.filter(e=>e.type===c.SymbolType.Function)}getGlobalVariables(){return this.globalVars}getStaticVariables(e){e=m.NormalizePath(e);let t=this.staticsByFile[e];if(!t){t=[];for(const r of this.staticVars){const s=this.fileMap[r.file];s&&-1!==s.indexOf(e)&&t.push(r)}this.staticsByFile[e]=t}return t}getFunctionByName(e,t){if(t){t=m.NormalizePath(t);const r=this.staticFuncsMap[e];if(r){for(const e of r)if(e.file===t)return e;for(const e of r){const r=this.fileMap[e.file];if(r&&-1!==r.indexOf(t))return e}}}return this.globalFuncsMap[e]}static NormalizePath(e){return e?(e="win32"===n.platform()?e.replace(/\//g,"\\"):e.replace(/\\/g,"/"),e=o.normalize(e),"win32"===n.platform()&&(e=e.toLowerCase()),e):e}}t.SymbolTable=m,m.schemaVer=0}]);
//# sourceMappingURL=debugadapter.js.map