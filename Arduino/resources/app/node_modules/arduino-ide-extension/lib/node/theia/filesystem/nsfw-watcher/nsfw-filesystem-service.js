"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NoDelayDisposalTimeoutNsfwFileSystemWatcherService = void 0;
const minimatch_1 = require("minimatch");
const nsfw_filesystem_service_1 = require("@theia/filesystem/lib/node/nsfw-watcher/nsfw-filesystem-service");
// Dispose the watcher immediately when the last reference is removed. By default, Theia waits 10 sec.
// https://github.com/eclipse-theia/theia/issues/11639#issuecomment-1238980708
const NoDelay = 0;
class NoDelayDisposalTimeoutNsfwFileSystemWatcherService extends nsfw_filesystem_service_1.NsfwFileSystemWatcherService {
    createWatcher(clientId, fsPath, options) {
        const watcherOptions = {
            ignored: options.ignored.map((pattern) => new minimatch_1.Minimatch(pattern, { dot: true })),
        };
        return new nsfw_filesystem_service_1.NsfwWatcher(clientId, fsPath, watcherOptions, this.options, this.maybeClient, NoDelay);
    }
}
exports.NoDelayDisposalTimeoutNsfwFileSystemWatcherService = NoDelayDisposalTimeoutNsfwFileSystemWatcherService;
//# sourceMappingURL=nsfw-filesystem-service.js.map